var e=(e,t,l)=>new Promise(((a,o)=>{var s=e=>{try{r(l.next(e))}catch(t){o(t)}},i=e=>{try{r(l.throw(e))}catch(t){o(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);r((l=l.apply(e,t)).next())}));import{r as t}from"./fetch-PoMvJyCE.js";import{_ as l,E as a,r as o,o as s,c as i,a as r,b as p,w as u,F as n,d,e as c,f as m}from"./index-P5OYZ-yC.js";const h={class:"vue-home-main"},b={class:"mu-search-container pall10"},v={class:"mu-search-form-button"},g={class:"mu-handle-content"};const f=l({data:()=>({dialogVisible:!1,popTitle:"创建项目",formSaveBtn:"保存",formDisbled:!1,popShowBottomBtn:!0,searchForm:{name:"",type:"",status:"",pageSize:10,page:1},statusOptions:[{value:"1",label:"禁用"},{value:"2",label:"启用"}],typeOptions:[{value:"1",label:"电脑端"},{value:"2",label:"移动端"}],columns:[{label:"项目名称",prop:"name"},{label:"三字码",prop:"code"},{label:"项目描述",prop:"desc"},{label:"项目类型",prop:"type_desc"},{label:"项目状态",prop:"status_desc"},{label:"创建时间",prop:"create_time"},{label:"修改时间",prop:"update_time"},{width:"180px",label:"操作",prop:"options",noEmptyValue:!0}],tableData:[],total:0,btnPopForm:[{key:"type",default:1,type:"radio",label:"项目类型",dataOptions:[{label:"pc",value:1},{label:"mobile",value:2}],placeholder:"请选择项目类型",value:"",rules:[{required:!0,message:"请选择项目类型"}]},{key:"code",default:"",type:"input",label:"三字码",data:"",placeholder:"请输入项目三字码",value:"",rules:[{required:!0,message:"请输入项目三字码",trigger:"blur"},{max:3,message:"请输入英文3个字符串",trigger:"blur"}]},{key:"name",default:"",type:"input",label:"项目名称",data:"",placeholder:"请输入项目名称",value:"",rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{key:"desc",default:"",type:"input",label:"项目描述",data:"",placeholder:"请输入项目描述",value:"",rules:[{required:!0,message:"请输入项目描述",trigger:"blur"}]},{key:"status",default:2,type:"radio",label:"是否禁用",dataOptions:[{label:"禁用",value:1},{label:"开启",value:2}],value:"",rules:[{required:!0,message:"请选择是否禁用"}]}],projectDetail:{}}),mounted(){this.getProjectList()},methods:{handleCurrentChange(e){this.searchForm.page=e,this.getProjectList()},resetForm(){this.searchForm={name:"",type:"",status:"",pageSize:10,page:1},this.getProjectList()},getProjectList(){return e(this,null,(function*(){let e=yield(l=this.searchForm,t({url:"/adm/project/list",method:"post",data:l}));var l;e.success&&(this.tableData=e.model.list,this.total=e.model.count)}))},popClick(e){this.dialogVisible=e,this.projectDetail={},this.popTitle="创建项目",this.formSaveBtn="保存",this.formDisbled=!1},edit(e){this.projectDetail=e,this.dialogVisible=!0,this.popTitle="修改项目",this.formSaveBtn="修改",this.popShowBottomBtn=!0},detail(e){this.projectDetail=e,this.dialogVisible=!0,this.popTitle="项目详情",this.formDisbled=!0,this.formSaveBtn="修改",this.popShowBottomBtn=!1},popSuccess(l){return e(this,null,(function*(){var e;this.projectDetail&&(l.id=this.projectDetail&&this.projectDetail.id?this.projectDetail.id:""),(yield(e=l,t({url:"/adm/project/save",method:"post",data:e}))).success&&(a({message:l.id?"修改成功":"添加成功",type:"success"}),this.projectDetail={},this.popTitle="创建项目",this.formSaveBtn="保存",this.dialogVisible=!1,this.getProjectList())}))},goRoutePage(e){this.$router.push({path:"/vcc/index",query:{projectId:e.id}})}}},[["render",function(e,t,l,a,f,y){const k=o("el-input"),C=o("search-label"),_=o("el-col"),j=o("el-option"),D=o("el-select"),S=o("el-row"),F=o("el-button"),V=o("l-pop"),w=o("l-table");return s(),i("div",h,[r("div",b,[p(S,null,{default:u((()=>[p(_,{span:8},{default:u((()=>[p(C,{labelName:"项目名称"},{default:u((()=>[p(k,{modelValue:f.searchForm.name,"onUpdate:modelValue":t[0]||(t[0]=e=>f.searchForm.name=e),placeholder:"请输入项目名称"},null,8,["modelValue"])])),_:1})])),_:1}),p(_,{span:8},{default:u((()=>[p(C,{labelName:"分类"},{default:u((()=>[p(D,{modelValue:f.searchForm.type,"onUpdate:modelValue":t[1]||(t[1]=e=>f.searchForm.type=e),placeholder:"请选择分类"},{default:u((()=>[(s(!0),i(n,null,d(f.typeOptions,(e=>(s(),m(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(_,{span:8},{default:u((()=>[p(C,{labelName:"状态"},{default:u((()=>[p(D,{modelValue:f.searchForm.status,"onUpdate:modelValue":t[2]||(t[2]=e=>f.searchForm.status=e),placeholder:"请选择分类"},{default:u((()=>[(s(!0),i(n,null,d(f.statusOptions,(e=>(s(),m(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),r("div",v,[p(F,{onClick:y.resetForm},{default:u((()=>[c("重置")])),_:1},8,["onClick"]),p(F,{type:"primary",onClick:y.getProjectList},{default:u((()=>[c("查询")])),_:1},8,["onClick"])])]),r("div",g,[p(V,{"btn-text":"创建项目",detail:f.projectDetail,title:f.popTitle,disabled:f.formDisbled,"form-save-btn":f.formSaveBtn,"dialog-visible":f.dialogVisible,"btn-pop-form":f.btnPopForm,"is-show-bottom-btn":f.popShowBottomBtn,onPopClick:y.popClick,onSuccess:y.popSuccess},null,8,["detail","title","disabled","form-save-btn","dialog-visible","btn-pop-form","is-show-bottom-btn","onPopClick","onSuccess"])]),p(w,{data:f.tableData,columns:f.columns,"page-size":f.searchForm.pageSize,total:f.total,onHandleCurrentChange:y.handleCurrentChange},{options:u((e=>[p(F,{link:"",type:"primary",size:"small",onClick:t=>y.edit(e.row)},{default:u((()=>[c("修改")])),_:2},1032,["onClick"]),p(F,{link:"",type:"primary",size:"small",onClick:t=>y.detail(e.row)},{default:u((()=>[c("详情")])),_:2},1032,["onClick"]),p(F,{link:"",type:"primary",size:"small",onClick:t=>y.goRoutePage(e.row)},{default:u((()=>[c("路由列表")])),_:2},1032,["onClick"])])),_:1},8,["data","columns","page-size","total","onHandleCurrentChange"])])}],["__scopeId","data-v-2b9173ab"]]);export{f as default};

var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{k as i,g as u,a as r}from"./vcc-BO4Wzkve.js";import{m as p}from"./css-Cov03K-E.js";import{_ as c,r as d,o as m,c as v,b as y,w as b,e as h,a as f,F as k,d as g,A as _,h as O,V as C,f as S,v as j,T as V,x as A,p as D,j as x}from"./index-DZ9k51ZZ.js";import{c as w}from"./postcss-Cz0Oouzh.js";import{s as N}from"./store-BamIynk3.js";const I=[{name:"宽度",key:"width",type:"input",value:"",defaultValue:"auto"},{name:"高度",key:"height",type:"input",value:"",defaultValue:"auto"},{name:"字体颜色",key:"color",type:"color",value:"",defaultValue:"inherit"},{name:"背景颜色",key:"background-color",type:"color",value:"",defaultValue:"inherit"}],F={props:["localAttributes"],data:()=>({className:"",styleData:[],styleCode:""}),mounted(){this.styleData=JSON.parse(JSON.stringify(I)),this.init(this.localAttributes)},watch:{localAttributes:{handler(e){this.styleData=JSON.parse(JSON.stringify(I)),this.init(e)},deep:!0}},methods:{init(e){const a=e.filter((e=>"style"===e.key)),t=e.filter((e=>"class"===e.key));if(t&&t.length>0?this.className=t[0].value:this.className="",!a||0==a.length)return;this.styleCode=a[0].value;const l=this.parseStyleString(a[0].value);this.styleData.forEach((e=>{l[e.key]&&(e.value=l[e.key])}))},parseStyleString(e){if(!e)return;const a=e.split(";").filter(Boolean),t={};return a.forEach((e=>{const[a,l]=e.split(":").map((e=>e.trim()));a&&l&&(t[a]=l)})),t},codeStyleAttributes(){const e=this.styleData;let a="";e.forEach((e=>{e.value?a+=`${e.key}: ${e.value}; `:a+=`${e.key}: ${e.defaultValue}; `})),this.mergeStyles(this.styleCode,a,(e=>{e&&this.$emit("childSave","style",`${e}`)}))},mergeStyles(e,a,t){e||t(a);p(`\n        .my-class {\n          ${e}\n        }\n      `,`\n        .my-class {\n          ${a}\n        }\n      `).then((e=>{const a=e.match(/\.my-class {([\s\S]*?)}/)[1].replace(/\s+/g," ");t(a)}))},clickProp(e){e.stopPropagation()},inputClassName(e){this.$emit("childSave","class",`${e}`)}}},B={class:"attribute-style-box"},M={class:"attribute-seeting-content"},U={class:"attribute-seeting-content-item"},P=f("div",{class:"label"},"类名：",-1),R={class:"attribute-seeting-content-item-content"},$={class:"label"},J={key:0,class:"attribute-seeting-content-item-content"},q={key:1,class:"attribute-seeting-content-item-content"};const E=c(F,[["render",function(e,a,t,l,o,n){const s=d("el-divider"),i=d("el-input"),u=d("el-color-picker");return m(),v("div",B,[y(s,{"content-position":"left"},{default:b((()=>[h("样式处理")])),_:1}),f("div",M,[f("div",U,[P,f("div",R,[y(i,{modelValue:o.className,"onUpdate:modelValue":a[0]||(a[0]=e=>o.className=e),onInput:n.inputClassName},null,8,["modelValue","onInput"])])]),(m(!0),v(k,null,g(o.styleData,((e,a)=>(m(),v("div",{class:"attribute-seeting-content-item",key:a},[f("div",$,_(e.name)+"：",1),"input"===e.type?(m(),v("div",J,[y(i,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onChange:n.codeStyleAttributes},null,8,["modelValue","onUpdate:modelValue","onChange"])])):O("",!0),"color"===e.type?(m(),v("div",q,[y(u,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,"popper-class":"vcc-color-dropdown",onChange:n.codeStyleAttributes,onClick:n.clickProp},null,8,["modelValue","onUpdate:modelValue","onChange","onClick"])])):O("",!0)])))),128))])])}]]),Y=[{name:"自定补全输入框",label:"",valueName:"",value:"",type:"autocomplete",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"回调函数",key:"fetchSuggestions",value:"",type:"function"}]},{name:"多选框",label:"",valueName:"",value:"",type:"checkbox-group",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"勾选最小数量",key:"min",value:""},{name:"勾选最大数量",key:"max",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"}]},{name:"日期选择器",label:"",valueName:"",value:"",type:"date-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"显示类型",key:"type",value:"",type:"data",data:[{label:"时间区间(年月日时分秒)",value:"datetimerange"},{label:"时间区间(年月日)",value:"daterange"},{label:"年月日时分秒",value:"datetime"},{label:"按周形式选择",value:"week"},{label:"年",value:"year"},{label:"月",value:"month"},{label:"日",value:"date"}]},{name:"时间格式",key:"format",value:"",type:"data",data:[{label:"年-月-日",value:"YYYY-MM-DD"},{label:"年-月-日 时:分:秒",value:"YYYY-MM-DD HH:mm:ss"}]},{name:"分隔符",key:"range-separator",value:""},{name:"默认显示日期",key:"default-value",value:""},{name:"绑定值时间格式",key:"value-format",value:"",type:"data",data:[{label:"年-月-日",value:"YYYY-MM-DD"},{label:"年-月-日 时:分:秒",value:"YYYY-MM-DD HH:mm:ss"}]},{name:"确认选定的值时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点触发",key:"onBlur",value:"",type:"function"},{name:"获取焦点触发",key:"onFocus",value:"",type:"function"},{name:"calendar-change",key:"calendar-change",value:"",type:"function"}]},{name:"输入框",label:"",valueName:"",value:"",type:"input",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"最大长度",key:"maxlength",value:""},{name:"最小长度",key:"minlength",value:""},{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否显示统计字数",key:"show-word-limit",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否显示密码图标",key:"show-password",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"类型",key:"type",value:"",type:"data",data:[{label:"文本",value:"text"},{label:"多行文本",value:"textarea"},{label:"密码",value:"password"}]},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"},{name:"输入框失去焦点触发",key:"onChange",value:"",type:"function"},{name:"值改变时触发",key:"onInput",value:"",type:"function"},{name:"clearable属性清空触发",key:"onClear",value:"",type:"function"}]},{name:"数字输入框",label:"",valueName:"",value:"",type:"date-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"最小值",key:"min",value:""},{name:"最大值",key:"max",value:""},{name:"计数器步长",key:"step",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否使用控制按钮",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"单选按钮",label:"",valueName:"",value:"",type:"radio-group",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"}]},{name:"下拉选择器",label:"",valueName:"",value:"",type:"select",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否多选",key:"multiple",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"},{name:"多选时移除触发",key:"remove-tag",value:"",type:"function"},{name:"点击清空按钮时触发",key:"onClear",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"时间选择器",label:"",valueName:"",value:"",type:"time-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"文本框是否可输入",key:"editable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否为时间范围选择",key:"is-range",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"输入框中的格式",key:"format",value:"",type:"data",data:[{label:"时:分:秒",value:"HH:mm:ss"}]},{name:"绑定值的格式",key:"value-format",value:"",type:"data",data:[{label:"时:分:秒",value:"HH:mm:ss"}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"时间选择",label:"",valueName:"",value:"",type:"time-select",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"开始时间",key:"start",value:""},{name:"结束时间",key:"end",value:""},{name:"间隔时间",key:"step",value:""},{name:"原生属性",key:"name",value:""},{name:"最早时间点",key:"min-time",value:""},{name:"最晚时间点",key:"max-time",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"文本框是否可输入",key:"editable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]}],z={components:{VNode:C,editor:w},props:["localAttributes","componentName"],inject:["vccApp"],watch:{componentName:{handler(e){this.localAttributes.forEach((a=>{":formSaveBtn"==a.key?this.formSaveBtn=a.value?a.value.replace(/['']/g,""):"l-form"==e?"保存":"搜索":this.formSaveBtn="l-form"==e?"保存":"搜索"}))},deep:!0}},data(){return{formSaveBtn:"l-form"==this.componentName?"保存":"查询",formArr:Y,editIndex:"",popObj:{},isAddFn:!1,codeFn:"return (e) => {\n    // this.vue 就是vue的当前实例\n    console.log(e, this.vue);\n}\n",fnObj:{},rules:{label:[{required:!0,message:"请输入名称",trigger:"blur"}],valueName:[{required:!0,message:"请输入绑定数据字段",trigger:"blur"}]},isShowFormAPop:!1,jsCode:"",formItem:[]}},mounted(){this.jsCode=this.vccApp.mainPanelProvider.getComponentOptions(),this.init(this.localAttributes)},methods:{inputFormSaveBtn(e){this.$emit("childSave",":formSaveBtn",`'${e}'`)},init(e){e.forEach((e=>{":form"==e.key&&(this.formItem=this.jsCode.data()[e.value]||[],this.formItemKey=e.value),":formSaveBtn"==e.key&&(this.formSaveBtn=e.value?e.value.replace(/['']/g,""):"l-form"==this.componentName?"保存":"搜索")}))},formSelectBtn(e){e.stopPropagation()},editForm(e,i){this.editIndex=i;let u=JSON.parse(JSON.stringify(this.formArr)).find((a=>a.type===e.type));if(!u)return void this.$message.error("该控件无法编辑");let r=(p=((e,a)=>{for(var t in a||(a={}))o.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&s(e,t,a[t]);return e})({},u),c={propsData:e.propsData,label:e.label,valueName:e.valueName,value:e.value,options:e.options||[],rule:{isRequire:e.rule.length>0&&e.rule[0].required,errorMessage:e.rule.length>0?e.rule[0].message:""},propsData:e.propsData},a(p,t(c)));var p,c;["checkbox-group"].indexOf(this.popObj.type)>-1&&(r.value=e.value&&e.value.length>0?e.value.join(","):""),this.popObj=r,this.isAddFn=!1,this.isShowFormAPop=!0},selectBtn(e){this.editIndex="";let a=JSON.parse(JSON.stringify(Y[e]));this.popObj=a,this.isAddFn=!1,this.isShowFormAPop=!0},propsClick(e){if("function"===e.type)return this.fnObj=JSON.parse(JSON.stringify(e)),void(this.isAddFn=!0);this.popObj.propsData[e.key]=e.value||""},clockFn(){this.isAddFn=!1},editFn(e,a){this.fnObj=JSON.parse(JSON.stringify(e)),this.fnObj.value=a,this.isAddFn=!0},saveFn(){const e=this.$refs.codeEditor.getEditorCode();this.popObj.propsData[this.fnObj.key]=e,this.isAddFn=!1},radioChage(e){e?this.rules.rule={errorMessage:[{required:!0,message:"请输入提示",trigger:"blur"}]}:delete this.rules.rule},deleteProps(e){delete this.popObj.propsData[e]},addOption(){this.popObj.options.push({label:"",value:""})},deleteOption(e){this.popObj.options.splice(e,1)},submitForm(e){return a=this,t=null,l=function*(){const a=this.$refs[e];a&&(yield a.validate(((e,a)=>{if(e){let e={label:this.popObj.label,valueName:this.popObj.valueName,value:this.popObj.value,type:this.popObj.type,rule:this.popObj.rule,propsData:this.popObj.propsData};["checkbox-group"].indexOf(this.popObj.type)>-1&&(e.value=this.popObj.value?this.popObj.value.split(","):[]),["checkbox-group","radio-group","select"].indexOf(this.popObj.type)>-1&&(e.options=this.popObj.options||[]),0===this.editIndex||this.editIndex?this.formItem[this.editIndex]=e:this.formItem.push(e),this.viewSaveJs(),this.isShowFormAPop=!1}})))},new Promise(((e,o)=>{var n=e=>{try{i(l.next(e))}catch(a){o(a)}},s=e=>{try{i(l.throw(e))}catch(a){o(a)}},i=a=>a.done?e(a.value):Promise.resolve(a.value).then(n,s);i((l=l.apply(a,t)).next())}));var a,t,l},removeItem(e){let a=this.formItem,t=e;a=a.slice(0,t).concat(a.slice(t+1)),this.formItem=a,this.viewSaveJs()},editP(e){var a,t,l;0!=e&&(a=this.formItem,t=e,l=e-1,[a[t],a[l]]=[a[l],a[t]],this.viewSaveJs())},viewSaveJs(e=[]){const a={[this.formItemKey]:JSON.parse(JSON.stringify(this.formItem))};this.vccApp.viewSaveJs(a,e)}}},H={class:"attribute-seeting-box"},K={class:"attribute-seeting-content"},L={class:"attribute-seeting-content-item"},T=f("div",{class:"label"},"提交按钮：",-1),G={class:"attribute-seeting-content-item-content"},Q={key:0,class:"l-form-b"},W=["onClick"],X={class:"label"},Z={class:"value"},ee={class:"icon-right"},ae=f("div",{class:"optionn-label"},"名称：",-1),te={class:"optionn-value"},le=f("div",{class:"icon-right"},null,-1),oe=f("div",{class:"optionn-label"},"绑定字段：",-1),ne={class:"optionn-value"},se=["onClick"],ie={style:{width:"100%"}},ue={class:"flex"},re=["onClick"],pe=["onClick"],ce={key:0},de={class:"form-bottom"},me={key:1,class:"fn-box"},ve={class:"form-bottom mt20"};const ye={components:{styleComponent:E,lFormA:c(z,[["render",function(e,a,t,l,o,n){const s=d("el-divider"),i=d("el-input"),u=d("RemoveFilled"),r=d("el-icon"),p=d("VNode"),c=d("Top"),C=d("Edit"),j=d("el-button"),V=d("el-popover"),A=d("el-form-item"),D=d("el-radio"),x=d("el-radio-group"),w=d("Plus"),N=d("el-option"),I=d("el-select"),F=d("el-form"),B=d("editor"),M=d("el-dialog");return m(),v("div",H,[y(s,{"content-position":"left"},{default:b((()=>[h("自定义表单")])),_:1}),f("div",K,[f("div",L,[T,f("div",G,[y(i,{placeholder:"请输入提交按钮文案",modelValue:o.formSaveBtn,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formSaveBtn=e),onInput:n.inputFormSaveBtn},null,8,["modelValue","onInput"])])]),o.formItem.length>0?(m(),v("div",Q,[(m(!0),v(k,null,g(o.formItem,((e,a)=>(m(),v("div",{key:a,class:"l-form-b-li"},[f("div",{class:"icon-left",onClick:e=>n.removeItem(a)},[y(r,null,{default:b((()=>[y(u)])),_:1})],8,W),f("div",X,_(e.label),1),f("div",Z,[y(p,{content:e,isEscapeFn:!1},null,8,["content"])]),f("div",ee,[y(r,{class:"mr5",onClick:e=>n.editP(a)},{default:b((()=>[y(c)])),_:2},1032,["onClick"]),y(r,{onClick:t=>n.editForm(e,a)},{default:b((()=>[y(C)])),_:2},1032,["onClick"])])])))),128))])):O("",!0),y(V,{placement:"left-start",trigger:"hover"},{reference:b((()=>[y(j,null,{default:b((()=>[h("添加表单")])),_:1})])),default:b((()=>[f("div",{class:"form-select-btn",onClick:a[1]||(a[1]=(...e)=>n.formSelectBtn&&n.formSelectBtn(...e))},[(m(!0),v(k,null,g(o.formArr,((e,a)=>(m(),S(j,{key:a,onClick:e=>n.selectBtn(a)},{default:b((()=>[h(_(e.name),1)])),_:2},1032,["onClick"])))),128))])])),_:1})]),y(M,{modelValue:o.isShowFormAPop,"onUpdate:modelValue":a[10]||(a[10]=e=>o.isShowFormAPop=e),title:o.isAddFn?"添加方法":`添加表单${o.popObj.name}`},{default:b((()=>[o.isAddFn?(m(),v("div",me,[y(B,{value:o.fnObj&&o.fnObj.value?o.fnObj.value:o.codeFn,height:"200px",ref:"codeEditor"},null,8,["value"]),f("div",ve,[y(j,{type:"primary",onClick:n.saveFn},{default:b((()=>[h("添加")])),_:1},8,["onClick"]),y(j,{type:"primary",onClick:n.clockFn},{default:b((()=>[h("返回")])),_:1},8,["onClick"])])])):(m(),S(F,{key:0,ref:"ruleFormARef",model:o.popObj,rules:o.rules,"label-width":"auto","status-icon":""},{default:b((()=>[y(A,{label:"字段名称：",prop:"label"},{default:b((()=>[y(i,{modelValue:o.popObj.label,"onUpdate:modelValue":a[2]||(a[2]=e=>o.popObj.label=e)},null,8,["modelValue"])])),_:1}),y(A,{label:"字段名：",prop:"valueName"},{default:b((()=>[y(i,{modelValue:o.popObj.valueName,"onUpdate:modelValue":a[3]||(a[3]=e=>o.popObj.valueName=e),placeholder:"请输入用于后端解析的英文字段名"},null,8,["modelValue"])])),_:1}),y(A,{label:"默认值：",prop:"value"},{default:b((()=>[y(i,{modelValue:o.popObj.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.popObj.value=e),placeholder:"请输入绑定默认值多选框按照,隔开"},null,8,["modelValue"])])),_:1}),y(A,{label:"是否必填：",prop:"popObj.rule.isRequire"},{default:b((()=>[y(x,{modelValue:o.popObj.rule.isRequire,"onUpdate:modelValue":a[5]||(a[5]=e=>o.popObj.rule.isRequire=e),onChange:n.radioChage},{default:b((()=>[y(D,{label:!1},{default:b((()=>[h("不必填")])),_:1}),y(D,{label:!0},{default:b((()=>[h("必填")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),o.popObj.rule.isRequire?(m(),S(A,{key:0,label:"必填提示：",prop:"rule.errorMessage"},{default:b((()=>[y(i,{modelValue:o.popObj.rule.errorMessage,"onUpdate:modelValue":a[6]||(a[6]=e=>o.popObj.rule.errorMessage=e)},null,8,["modelValue"])])),_:1})):O("",!0),["checkbox-group","radio-group","select"].indexOf(o.popObj.type)>-1?(m(),S(A,{key:1,label:"数据：",class:"form-options-content"},{default:b((()=>[(m(!0),v(k,null,g(o.popObj.options,((e,a)=>(m(),v("div",{key:a,class:"form-options-box"},[f("ul",null,[f("li",null,[ae,f("div",te,[y(i,{modelValue:e.label,"onUpdate:modelValue":a=>e.label=a},null,8,["modelValue","onUpdate:modelValue"])]),le]),f("li",null,[oe,f("div",ne,[y(i,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a},null,8,["modelValue","onUpdate:modelValue"])]),f("div",{class:"icon-right",onClick:e=>n.deleteOption(a)},[y(r,null,{default:b((()=>[y(u)])),_:1})],8,se)])])])))),128)),f("div",ie,[y(j,{type:"primary",circle:"",onClick:n.addOption},{default:b((()=>[y(r,null,{default:b((()=>[y(w)])),_:1})])),_:1},8,["onClick"])])])),_:1})):O("",!0),Object.keys(o.popObj.propsData).length>0?(m(!0),v(k,{key:2},g(o.popObj.propsDataSelects,((e,a)=>(m(),v(k,null,[Object.keys(o.popObj.propsData).indexOf(`${e.key}`)>-1?(m(),S(A,{key:a,label:`${e.name}：`},{default:b((()=>[f("div",ue,["function"!=e.type&&"data"!=e.type?(m(),S(i,{key:0,modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a},null,8,["modelValue","onUpdate:modelValue"])):"data"==e.type?(m(),S(I,{key:1,modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a,style:{width:"100%"}},{default:b((()=>[(m(!0),v(k,null,g(e.data,((e,a)=>(m(),S(N,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(m(),S(i,{key:2,type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a,disabled:""},null,8,["modelValue","onUpdate:modelValue"])),"function"==e.type?(m(),v("div",{key:3,class:"fn-edit",onClick:a=>n.editFn(e,o.popObj.propsData[e.key])},[y(r,null,{default:b((()=>[y(C)])),_:1})],8,re)):O("",!0),f("div",{class:"icon-right",onClick:a=>n.deleteProps(e.key)},[y(r,null,{default:b((()=>[y(u)])),_:1})],8,pe)])])),_:2},1032,["label"])):O("",!0)],64)))),256)):O("",!0),y(A,null,{default:b((()=>[y(V,{placement:"right-start",trigger:"hover",width:"180px"},{reference:b((()=>[y(j,{type:"primary",circle:""},{default:b((()=>[y(r,null,{default:b((()=>[y(w)])),_:1})])),_:1})])),default:b((()=>[f("div",{class:"form-props-btn",onClick:a[7]||(a[7]=(...e)=>n.formSelectBtn&&n.formSelectBtn(...e))},[Object.keys(o.popObj.propsData).length==o.popObj.propsDataSelects.length?(m(),v("div",ce,"无属性")):(m(!0),v(k,{key:1},g(o.popObj.propsDataSelects,((e,a)=>(m(),v(k,null,[-1==Object.keys(o.popObj.propsData).indexOf(`${e.key}`)?(m(),S(j,{key:a,onClick:a=>n.propsClick(e)},{default:b((()=>[h(_(e.name),1)])),_:2},1032,["onClick"])):O("",!0)],64)))),256))])])),_:1})])),_:1}),y(A,null,{default:b((()=>[f("div",de,[y(j,{type:"primary",onClick:a[8]||(a[8]=e=>n.submitForm("ruleFormARef"))},{default:b((()=>[h("保存")])),_:1}),y(j,{onClick:a[9]||(a[9]=e=>o.isShowFormAPop=!1)},{default:b((()=>[h("取消")])),_:1})])])),_:1})])),_:1},8,["model","rules"]))])),_:1},8,["modelValue","title"])])}]])},props:["__rawVueInfo__","enableRemoveButton","shortcutInitMode","JSCode","isShowAttribute"],data:function(){return{input:"",localAttributes:[],enable:!0,autoplay:!1,editMode:!1,textAttributes:""}},mounted(){document.querySelector(".attribute-container").addEventListener("click",(e=>{e.stopPropagation()})),"auto"===this.shortcutInitMode&&this.initShortcut()},beforeDestroy(){"auto"===this.shortcutInitMode&&this.destroyShortcut()},methods:{destroyShortcut(){i.unbind("⌘+a, ctrl+a"),i.unbind("⌘+s, ctrl+s"),i.unbind("⌘+d, ctrl+d"),i.unbind("⌘+c, ctrl+c")},initShortcut(){i("⌘+a, ctrl+a",(()=>{if(this.enable)return this.createNew(),!1})),i("⌘+s, ctrl+s",(()=>{if(this.enable)return this.save(),!1})),i("⌘+d, ctrl+d",(()=>{if(this.enable)return this.remove(),!1})),i("⌘+c, ctrl+c",(()=>{if(this.enable&&this.enableBroButton)return this.copyBro(),!1}))},onClassClick(){this.localAttributes.push({key:"class",value:"class-name"})},onEventClick(){this.localAttributes.push({key:"@click",value:"onEventClick"})},onTextClick(){this.localAttributes.push({key:"__text__",value:"content"})},createNew(){this.localAttributes.push({key:"",value:""})},childSave(e,a){let t=!1;this.localAttributes.forEach((l=>{l.key==e&&(l.value=a,t=!0)})),t||this.localAttributes.push({key:e,value:a}),this.save(!1)},save(e=!0){try{let a=[];if(this.editMode){a=this.textAttributes.split("\n").map((e=>{const[a,t]=e.split(": ");return{key:a,value:t}})),this.localAttributes=a}else a=this.localAttributes.filter((e=>!!e.key));this.$emit("save",{resultList:a,lc_id:this.rawInfoID}),e&&this.$notify({title:"提示",message:"代码已更新",position:"bottom-right",type:"success"})}catch(a){this.$message.error(a)}},remove(){this.$emit("remove",{lc_id:this.rawInfoID})},deleteItem(e){this.localAttributes.splice(e,1)},copyBro(){!function(e){let a=Object.create(e.__proto__);Object.assign(a,JSON.parse(JSON.stringify(e))),a.__proto__.parentCodeNode.__children.push(a)}(this.__rawVueInfo__),N.commit("onDragEnd")},onShow(){this.initShortcut()},onHide(){this.destroyShortcut()}},computed:{componentName(){return this.__rawVueInfo__?u(this.__rawVueInfo__):""},rawInfoID(){return this.__rawVueInfo__?r(this.__rawVueInfo__).lc_id:""},enableBroButton(){return[{name:"el-option",ifInDoc:!1},{name:"el-table-column",ifInDoc:!1},{name:"el-checkbox",ifInDoc:!0},{name:"el-radio",ifInDoc:!0}].find((e=>e.name==this.componentName))&&!1},attributeList(){const e=[],a=this.__rawVueInfo__;if(a){const t=a[u(a)];for(const a in t)if(t.hasOwnProperty(a)){const l=t[a];"object"!=typeof l&&"lc-mark"!=a&&"lc_id"!=a&&e.push({key:a,value:l})}}return e},attributeKeys(){return this.localAttributes.map((e=>e.key))}},watch:{attributeList:{handler:function(){this.localAttributes=this.attributeList},immediate:!0},localAttributes(e){0===e.length&&e.push({key:"",value:""}),this.textAttributes=e.map((e=>`${e.key}: ${e.value}`)).join("\n")}}},be=e=>(D("data-v-44a1e425"),e=e(),x(),e),he={key:0,class:"attribute-empty"},fe={style:{"text-align":"center"}},ke={style:{"margin-top":"20px"}},ge={name:"1"},_e=be((()=>f("div",{class:"split"},":",-1))),Oe={class:"quick-add-root"},Ce={style:{"margin-top":"5px"}},Se={name:"2"},je={style:{"margin-top":"10px","text-align":"center"}},Ve=be((()=>f("div",{style:{"text-algin":"center"}},[f("span",{class:"shortcut-tip"},"支持快捷键操作")],-1)));const Ae=c(ye,[["render",function(e,a,t,l,o,n){const s=d("el-empty"),i=d("styleComponent"),u=d("lFormA"),r=d("el-divider"),p=d("el-switch"),c=d("el-input"),_=d("Remove"),C=d("el-icon"),D=d("el-tag"),x=d("Plus"),w=d("el-button"),N=d("el-tooltip"),I=d("Refresh"),F=d("Delete"),B=d("document-copy"),M=d("el-scrollbar"),U=d("el-card");return m(),S(U,{class:"attribute-container"},{default:b((()=>[t.isShowAttribute?(m(),S(M,{key:1,height:"calc(100vh - 130px)"},{default:b((()=>[y(i,{localAttributes:e.localAttributes,"onUpdate:localAttributes":a[0]||(a[0]=a=>e.localAttributes=a),onChildSave:n.childSave},null,8,["localAttributes","onChildSave"]),"l-form"==n.componentName||"l-s-form"==n.componentName?(m(),S(u,{key:0,componentName:n.componentName,localAttributes:e.localAttributes,"onUpdate:localAttributes":a[1]||(a[1]=a=>e.localAttributes=a),onChildSave:n.childSave},null,8,["componentName","localAttributes","onChildSave"])):O("",!0),y(r,{"content-position":"left"},{default:b((()=>[h("特殊处理")])),_:1}),f("div",fe,[y(p,{modelValue:e.editMode,"onUpdate:modelValue":a[2]||(a[2]=a=>e.editMode=a),"active-text":"自由编辑","inactive-text":"约束编辑","active-color":"#13ce66","inactive-color":"#13ce66"},null,8,["modelValue"])]),f("div",ke,[j(f("div",ge,[f("div",null,[(m(!0),v(k,null,g(e.localAttributes,((e,a)=>(m(),v("div",{class:"item",key:a},[y(c,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,placeholder:"key"+a,class:"half-width",type:"textarea",autosize:{minRows:2,maxRows:4}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),_e,y(c,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"textarea",placeholder:"value"+a,class:"half-width",style:{"flex-grow":"4"},autosize:{minRows:2,maxRows:4}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),y(C,{style:{"margin-left":"5px"},onClick:e=>n.deleteItem(a)},{default:b((()=>[y(_)])),_:2},1032,["onClick"])])))),128)),f("div",Oe,[h(" 快速增加一些属性: "),f("div",Ce,[y(V,{name:"el-zoom-in-center"},{default:b((()=>[-1==n.attributeKeys.indexOf("class")?(m(),S(D,{key:0,size:"small",type:"success",onClick:n.onClassClick,effect:"dark",class:"tag"},{default:b((()=>[h("Class ")])),_:1},8,["onClick"])):O("",!0)])),_:1}),y(V,{name:"el-zoom-in-center"},{default:b((()=>[-1==n.attributeKeys.indexOf("@click")?(m(),S(D,{key:0,size:"small",type:"success",onClick:n.onEventClick,effect:"dark",class:"tag"},{default:b((()=>[h("点击事件")])),_:1},8,["onClick"])):O("",!0)])),_:1}),y(V,{name:"el-zoom-in-center"},{default:b((()=>[n.attributeKeys.includes("__text__")?O("",!0):(m(),S(D,{key:0,size:"small",type:"success",onClick:n.onTextClick,effect:"dark",class:"tag"},{default:b((()=>[h("文本内容")])),_:1},8,["onClick"]))])),_:1})])])])],512),[[A,!e.editMode]]),j(f("div",Se,[y(c,{type:"textarea",autosize:{minRows:4},placeholder:"请输入属性, 以key: value的形式(冒号后要有空格)",modelValue:e.textAttributes,"onUpdate:modelValue":a[3]||(a[3]=a=>e.textAttributes=a)},null,8,["modelValue"])],512),[[A,e.editMode]])]),f("div",je,[y(N,{class:"item",effect:"dark",content:"新增属性 ctrl+a",placement:"bottom"},{default:b((()=>[y(w,{type:"primary",class:"center",onClick:n.createNew,circle:""},{default:b((()=>[y(C,null,{default:b((()=>[y(x)])),_:1})])),_:1},8,["onClick"])])),_:1}),y(N,{class:"item",effect:"dark",content:"保存属性 ctrl+s",placement:"bottom"},{default:b((()=>[y(w,{type:"success",class:"center",onClick:n.save,circle:""},{default:b((()=>[y(C,null,{default:b((()=>[y(I)])),_:1})])),_:1},8,["onClick"])])),_:1}),t.enableRemoveButton?(m(),S(N,{key:0,class:"item",effect:"dark",content:"移除该组件 ctrl+d",placement:"bottom"},{default:b((()=>[y(w,{type:"danger",class:"center",onClick:n.remove,circle:""},{default:b((()=>[y(C,null,{default:b((()=>[y(F)])),_:1})])),_:1},8,["onClick"])])),_:1})):O("",!0),n.enableBroButton?(m(),S(N,{key:1,class:"item",effect:"dark",content:"复制一个兄弟组件 ctrl+c",placement:"bottom"},{default:b((()=>[y(w,{type:"primary",class:"center",onClick:n.copyBro,circle:""},{default:b((()=>[y(C,null,{default:b((()=>[y(B)])),_:1})])),_:1},8,["onClick"])])),_:1})):O("",!0),Ve])])),_:1})):(m(),v("div",he,[y(s,{description:"还没有数据哦"},{default:b((()=>[h(" 赶快拖拽组件来生成你的H5页面吧～ ")])),_:1})]))])),_:1})}],["__scopeId","data-v-44a1e425"]]);export{Ae as default};

var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{k as s,g as u,a as r}from"./vcc-GukbNiWp.js";import{_ as p,r as d,o as c,c as m,b as v,w as y,e as b,V as f,a as h,F as k,d as g,B as _,h as O,f as j,y as C,T as V,z as x,p as S,j as D}from"./index-DXYn5fcO.js";import{c as w}from"./index-pn0RiVWJ.js";import{s as A}from"./store-CXszMid6.js";const I=p({},[["render",function(e,a){const l=d("el-divider");return c(),m("div",null,[v(l,{"content-position":"left"},{default:y((()=>[b("样式处理")])),_:1})])}]]),F=[{name:"自定补全输入框",label:"",valueName:"",value:"",type:"autocomplete",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"回调函数",key:"fetchSuggestions",value:"",type:"function"}]},{name:"多选框",label:"",valueName:"",value:"",type:"checkbox-group",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"勾选最小数量",key:"min",value:""},{name:"勾选最大数量",key:"max",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"}]},{name:"日期选择器",label:"",valueName:"",value:"",type:"date-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"显示类型",key:"type",value:"",type:"data",data:[{label:"时间区间(年月日时分秒)",value:"datetimerange"},{label:"时间区间(年月日)",value:"daterange"},{label:"年月日时分秒",value:"datetime"},{label:"按周形式选择",value:"week"},{label:"年",value:"year"},{label:"月",value:"month"},{label:"日",value:"date"}]},{name:"时间格式",key:"format",value:"",type:"data",data:[{label:"年-月-日",value:"YYYY-MM-DD"},{label:"年-月-日 时:分:秒",value:"YYYY-MM-DD HH:mm:ss"}]},{name:"分隔符",key:"range-separator",value:""},{name:"默认显示日期",key:"default-value",value:""},{name:"绑定值时间格式",key:"value-format",value:"",type:"data",data:[{label:"年-月-日",value:"YYYY-MM-DD"},{label:"年-月-日 时:分:秒",value:"YYYY-MM-DD HH:mm:ss"}]},{name:"确认选定的值时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点触发",key:"onBlur",value:"",type:"function"},{name:"获取焦点触发",key:"onFocus",value:"",type:"function"},{name:"calendar-change",key:"calendar-change",value:"",type:"function"}]},{name:"输入框",label:"",valueName:"",value:"",type:"input",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"最大长度",key:"maxlength",value:""},{name:"最小长度",key:"minlength",value:""},{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否显示统计字数",key:"show-word-limit",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否显示密码图标",key:"show-password",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"类型",key:"type",value:"",type:"data",data:[{label:"文本",value:"text"},{label:"多行文本",value:"textarea"},{label:"密码",value:"password"}]},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"},{name:"输入框失去焦点触发",key:"onChange",value:"",type:"function"},{name:"值改变时触发",key:"onInput",value:"",type:"function"},{name:"clearable属性清空触发",key:"onClear",value:"",type:"function"}]},{name:"数字输入框",label:"",valueName:"",value:"",type:"date-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"最小值",key:"min",value:""},{name:"最大值",key:"max",value:""},{name:"计数器步长",key:"step",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否使用控制按钮",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"单选按钮",label:"",valueName:"",value:"",type:"radio-group",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"}]},{name:"下拉选择器",label:"",valueName:"",value:"",type:"select",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否多选",key:"multiple",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"},{name:"多选时移除触发",key:"remove-tag",value:"",type:"function"},{name:"点击清空按钮时触发",key:"onClear",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"时间选择器",label:"",valueName:"",value:"",type:"time-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"文本框是否可输入",key:"editable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否为时间范围选择",key:"is-range",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"输入框中的格式",key:"format",value:"",type:"data",data:[{label:"时:分:秒",value:"HH:mm:ss"}]},{name:"绑定值的格式",key:"value-format",value:"",type:"data",data:[{label:"时:分:秒",value:"HH:mm:ss"}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"时间选择",label:"",valueName:"",value:"",type:"time-select",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"开始时间",key:"start",value:""},{name:"结束时间",key:"end",value:""},{name:"间隔时间",key:"step",value:""},{name:"原生属性",key:"name",value:""},{name:"最早时间点",key:"min-time",value:""},{name:"最晚时间点",key:"max-time",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"文本框是否可输入",key:"editable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]}],N={components:{VNode:f,editor:w},props:["localAttributes"],inject:["vccApp"],data:()=>({formSaveBtn:"保存",formArr:F,editIndex:"",popObj:{},isAddFn:!1,codeFn:"return (e) => {\n    // this.vue 就是vue的当前实例\n    console.log(e, this.vue);\n}\n",fnObj:{},rules:{label:[{required:!0,message:"请输入名称",trigger:"blur"}],valueName:[{required:!0,message:"请输入绑定数据字段",trigger:"blur"}]},isShowFormAPop:!1,jsCode:"",formItem:[]}),mounted(){this.jsCode=this.vccApp.mainPanelProvider.getComponentOptions(),this.init(this.localAttributes)},methods:{inputFormSaveBtn(e){this.$emit("childSave",":formSaveBtn",`'${e}'`)},init(e){e.forEach((e=>{":form"==e.key&&(this.formItem=this.jsCode.data()[e.value]||[],this.formItemKey=e.value),":formSaveBtn"==e.key&&(this.formSaveBtn=e.value?e.value.replace(/['']/g,""):"保存")}))},formSelectBtn(e){e.stopPropagation()},editForm(e,s){this.editIndex=s;let u=JSON.parse(JSON.stringify(this.formArr)).find((a=>a.type===e.type));if(!u)return void this.$message.error("该控件无法编辑");let r=(p=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&i(e,l,a[l]);return e})({},u),d={propsData:e.propsData,label:e.label,valueName:e.valueName,value:e.value,options:e.options||[],rule:{isRequire:e.rule.length>0&&e.rule[0].required,errorMessage:e.rule.length>0?e.rule[0].message:""},propsData:e.propsData},a(p,l(d)));var p,d;["checkbox-group"].indexOf(this.popObj.type)>-1&&(r.value=e.value&&e.value.length>0?e.value.join(","):""),this.popObj=r,this.isAddFn=!1,this.isShowFormAPop=!0},selectBtn(e){this.editIndex="";let a=JSON.parse(JSON.stringify(F[e]));this.popObj=a,this.isAddFn=!1,this.isShowFormAPop=!0},propsClick(e){if("function"===e.type)return this.fnObj=JSON.parse(JSON.stringify(e)),void(this.isAddFn=!0);this.popObj.propsData[e.key]=e.value||""},clockFn(){this.isAddFn=!1},editFn(e,a){this.fnObj=JSON.parse(JSON.stringify(e)),this.fnObj.value=a,this.isAddFn=!0},saveFn(){const e=this.$refs.codeEditor.getEditorCode();this.popObj.propsData[this.fnObj.key]=e,this.isAddFn=!1},radioChage(e){e?this.rules.rule={errorMessage:[{required:!0,message:"请输入提示",trigger:"blur"}]}:delete this.rules.rule},deleteProps(e){delete this.popObj.propsData[e]},addOption(){this.popObj.options.push({label:"",value:""})},deleteOption(e){this.popObj.options.splice(e,1)},submitForm(e){return a=this,l=null,t=function*(){const a=this.$refs[e];a&&(yield a.validate(((e,a)=>{if(e){let e={label:this.popObj.label,valueName:this.popObj.valueName,value:this.popObj.value,type:this.popObj.type,rule:this.popObj.rule,propsData:this.popObj.propsData};["checkbox-group"].indexOf(this.popObj.type)>-1&&(e.value=this.popObj.value?this.popObj.value.split(","):[]),["checkbox-group","radio-group","select"].indexOf(this.popObj.type)>-1&&(e.options=this.popObj.options||[]),0===this.editIndex||this.editIndex?this.formItem[this.editIndex]=e:this.formItem.push(e),this.viewSaveJs(),this.isShowFormAPop=!1}})))},new Promise(((e,o)=>{var n=e=>{try{s(t.next(e))}catch(a){o(a)}},i=e=>{try{s(t.throw(e))}catch(a){o(a)}},s=a=>a.done?e(a.value):Promise.resolve(a.value).then(n,i);s((t=t.apply(a,l)).next())}));var a,l,t},removeItem(e){let a=this.formItem,l=e;a=a.slice(0,l).concat(a.slice(l+1)),this.formItem=a,this.viewSaveJs()},viewSaveJs(e=[]){const a={[this.formItemKey]:JSON.parse(JSON.stringify(this.formItem))};this.vccApp.viewSaveJs(a,e)}}},B={class:"attribute-seeting-box"},M={class:"attribute-seeting-content"},R={class:"attribute-seeting-content-item"},U=h("div",{class:"label"},"提交按钮：",-1),P={class:"attribute-seeting-content-item-content"},q={key:0,class:"l-form-b"},J=["onClick"],Y={class:"label"},$={class:"value"},E=["onClick"],z=h("div",{class:"optionn-label"},"名称：",-1),H={class:"optionn-value"},K=h("div",{class:"icon-right"},null,-1),L=h("div",{class:"optionn-label"},"绑定字段：",-1),T={class:"optionn-value"},G=["onClick"],Q={style:{width:"100%"}},W={class:"flex"},X=["onClick"],Z=["onClick"],ee={key:0},ae={class:"form-bottom"},le={key:1,class:"fn-box"},te={class:"form-bottom mt20"};const oe={components:{styleComponent:I,lFormA:p(N,[["render",function(e,a,l,t,o,n){const i=d("el-divider"),s=d("el-input"),u=d("RemoveFilled"),r=d("el-icon"),p=d("VNode"),f=d("Edit"),C=d("el-button"),V=d("el-popover"),x=d("el-form-item"),S=d("el-radio"),D=d("el-radio-group"),w=d("Plus"),A=d("el-option"),I=d("el-select"),F=d("el-form"),N=d("editor"),oe=d("el-dialog");return c(),m("div",B,[v(i,{"content-position":"left"},{default:y((()=>[b("自定义表单")])),_:1}),h("div",M,[h("div",R,[U,h("div",P,[v(s,{placeholder:"请输入提交按钮文案",modelValue:o.formSaveBtn,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formSaveBtn=e),onInput:n.inputFormSaveBtn},null,8,["modelValue","onInput"])])]),o.formItem.length>0?(c(),m("div",q,[(c(!0),m(k,null,g(o.formItem,((e,a)=>(c(),m("div",{key:a,class:"l-form-b-li"},[h("div",{class:"icon-left",onClick:e=>n.removeItem(a)},[v(r,null,{default:y((()=>[v(u)])),_:1})],8,J),h("div",Y,_(e.label),1),h("div",$,[v(p,{content:e,isEscapeFn:!1},null,8,["content"])]),h("div",{class:"icon-right",onClick:l=>n.editForm(e,a)},[v(r,null,{default:y((()=>[v(f)])),_:1})],8,E)])))),128))])):O("",!0),v(V,{placement:"left-start",trigger:"hover"},{reference:y((()=>[v(C,null,{default:y((()=>[b("添加表单")])),_:1})])),default:y((()=>[h("div",{class:"form-select-btn",onClick:a[1]||(a[1]=(...e)=>n.formSelectBtn&&n.formSelectBtn(...e))},[(c(!0),m(k,null,g(o.formArr,((e,a)=>(c(),j(C,{key:a,onClick:e=>n.selectBtn(a)},{default:y((()=>[b(_(e.name),1)])),_:2},1032,["onClick"])))),128))])])),_:1})]),v(oe,{modelValue:o.isShowFormAPop,"onUpdate:modelValue":a[10]||(a[10]=e=>o.isShowFormAPop=e),title:o.isAddFn?"添加方法":`添加表单${o.popObj.name}`},{default:y((()=>[o.isAddFn?(c(),m("div",le,[v(N,{value:o.fnObj&&o.fnObj.value?o.fnObj.value:o.codeFn,height:"200px",ref:"codeEditor"},null,8,["value"]),h("div",te,[v(C,{type:"primary",onClick:n.saveFn},{default:y((()=>[b("添加")])),_:1},8,["onClick"]),v(C,{type:"primary",onClick:n.clockFn},{default:y((()=>[b("返回")])),_:1},8,["onClick"])])])):(c(),j(F,{key:0,ref:"ruleFormARef",model:o.popObj,rules:o.rules,"label-width":"auto","status-icon":""},{default:y((()=>[v(x,{label:"字段名称：",prop:"label"},{default:y((()=>[v(s,{modelValue:o.popObj.label,"onUpdate:modelValue":a[2]||(a[2]=e=>o.popObj.label=e)},null,8,["modelValue"])])),_:1}),v(x,{label:"字段名：",prop:"valueName"},{default:y((()=>[v(s,{modelValue:o.popObj.valueName,"onUpdate:modelValue":a[3]||(a[3]=e=>o.popObj.valueName=e),placeholder:"请输入用于后端解析的英文字段名"},null,8,["modelValue"])])),_:1}),v(x,{label:"默认值：",prop:"value"},{default:y((()=>[v(s,{modelValue:o.popObj.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.popObj.value=e),placeholder:"请输入绑定默认值多选框按照,隔开"},null,8,["modelValue"])])),_:1}),v(x,{label:"是否必填：",prop:"popObj.rule.isRequire"},{default:y((()=>[v(D,{modelValue:o.popObj.rule.isRequire,"onUpdate:modelValue":a[5]||(a[5]=e=>o.popObj.rule.isRequire=e),onChange:n.radioChage},{default:y((()=>[v(S,{label:!1},{default:y((()=>[b("不必填")])),_:1}),v(S,{label:!0},{default:y((()=>[b("必填")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),o.popObj.rule.isRequire?(c(),j(x,{key:0,label:"必填提示：",prop:"rule.errorMessage"},{default:y((()=>[v(s,{modelValue:o.popObj.rule.errorMessage,"onUpdate:modelValue":a[6]||(a[6]=e=>o.popObj.rule.errorMessage=e)},null,8,["modelValue"])])),_:1})):O("",!0),["checkbox-group","radio-group","select"].indexOf(o.popObj.type)>-1?(c(),j(x,{key:1,label:"数据：",class:"form-options-content"},{default:y((()=>[(c(!0),m(k,null,g(o.popObj.options,((e,a)=>(c(),m("div",{key:a,class:"form-options-box"},[h("ul",null,[h("li",null,[z,h("div",H,[v(s,{modelValue:e.label,"onUpdate:modelValue":a=>e.label=a},null,8,["modelValue","onUpdate:modelValue"])]),K]),h("li",null,[L,h("div",T,[v(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a},null,8,["modelValue","onUpdate:modelValue"])]),h("div",{class:"icon-right",onClick:e=>n.deleteOption(a)},[v(r,null,{default:y((()=>[v(u)])),_:1})],8,G)])])])))),128)),h("div",Q,[v(C,{type:"primary",circle:"",onClick:n.addOption},{default:y((()=>[v(r,null,{default:y((()=>[v(w)])),_:1})])),_:1},8,["onClick"])])])),_:1})):O("",!0),Object.keys(o.popObj.propsData).length>0?(c(!0),m(k,{key:2},g(o.popObj.propsDataSelects,((e,a)=>(c(),m(k,null,[Object.keys(o.popObj.propsData).indexOf(`${e.key}`)>-1?(c(),j(x,{key:a,label:`${e.name}：`},{default:y((()=>[h("div",W,["function"!=e.type&&"data"!=e.type?(c(),j(s,{key:0,modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a},null,8,["modelValue","onUpdate:modelValue"])):"data"==e.type?(c(),j(I,{key:1,modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a,style:{width:"100%"}},{default:y((()=>[(c(!0),m(k,null,g(e.data,((e,a)=>(c(),j(A,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(c(),j(s,{key:2,type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a,disabled:""},null,8,["modelValue","onUpdate:modelValue"])),"function"==e.type?(c(),m("div",{key:3,class:"fn-edit",onClick:a=>n.editFn(e,o.popObj.propsData[e.key])},[v(r,null,{default:y((()=>[v(f)])),_:1})],8,X)):O("",!0),h("div",{class:"icon-right",onClick:a=>n.deleteProps(e.key)},[v(r,null,{default:y((()=>[v(u)])),_:1})],8,Z)])])),_:2},1032,["label"])):O("",!0)],64)))),256)):O("",!0),v(x,null,{default:y((()=>[v(V,{placement:"right-start",trigger:"hover",width:"180px"},{reference:y((()=>[v(C,{type:"primary",circle:""},{default:y((()=>[v(r,null,{default:y((()=>[v(w)])),_:1})])),_:1})])),default:y((()=>[h("div",{class:"form-props-btn",onClick:a[7]||(a[7]=(...e)=>n.formSelectBtn&&n.formSelectBtn(...e))},[Object.keys(o.popObj.propsData).length==o.popObj.propsDataSelects.length?(c(),m("div",ee,"无属性")):(c(!0),m(k,{key:1},g(o.popObj.propsDataSelects,((e,a)=>(c(),m(k,null,[-1==Object.keys(o.popObj.propsData).indexOf(`${e.key}`)?(c(),j(C,{key:a,onClick:a=>n.propsClick(e)},{default:y((()=>[b(_(e.name),1)])),_:2},1032,["onClick"])):O("",!0)],64)))),256))])])),_:1})])),_:1}),v(x,null,{default:y((()=>[h("div",ae,[v(C,{type:"primary",onClick:a[8]||(a[8]=e=>n.submitForm("ruleFormARef"))},{default:y((()=>[b("保存")])),_:1}),v(C,{onClick:a[9]||(a[9]=e=>o.isShowFormAPop=!1)},{default:y((()=>[b("取消")])),_:1})])])),_:1})])),_:1},8,["model","rules"]))])),_:1},8,["modelValue","title"])])}]])},props:["__rawVueInfo__","enableRemoveButton","shortcutInitMode","JSCode"],data:function(){return{input:"",localAttributes:[],enable:!0,autoplay:!1,editMode:!1,textAttributes:""}},mounted(){document.querySelector(".attribute-container").addEventListener("click",(e=>{e.stopPropagation()})),"auto"===this.shortcutInitMode&&this.initShortcut()},beforeDestroy(){"auto"===this.shortcutInitMode&&this.destroyShortcut()},methods:{destroyShortcut(){s.unbind("⌘+a, ctrl+a"),s.unbind("⌘+s, ctrl+s"),s.unbind("⌘+d, ctrl+d"),s.unbind("⌘+c, ctrl+c")},initShortcut(){s("⌘+a, ctrl+a",(()=>{if(this.enable)return this.createNew(),!1})),s("⌘+s, ctrl+s",(()=>{if(this.enable)return this.save(),!1})),s("⌘+d, ctrl+d",(()=>{if(this.enable)return this.remove(),!1})),s("⌘+c, ctrl+c",(()=>{if(this.enable&&this.enableBroButton)return this.copyBro(),!1}))},onClassClick(){this.localAttributes.push({key:"class",value:"class-name"})},onEventClick(){this.localAttributes.push({key:"@click",value:"onEventClick"})},onTextClick(){this.localAttributes.push({key:"__text__",value:"content"})},createNew(){this.localAttributes.push({key:"",value:""})},childSave(e,a){let l=!1;this.localAttributes.forEach((t=>{t.key==e&&(t.value=a,l=!0)})),l||this.localAttributes.push({key:e,value:a}),this.save(!1)},save(e=!0){try{let a=[];if(this.editMode){a=this.textAttributes.split("\n").map((e=>{const[a,l]=e.split(": ");return{key:a,value:l}})),this.localAttributes=a}else a=this.localAttributes.filter((e=>!!e.key));this.$emit("save",{resultList:a,lc_id:this.rawInfoID}),e&&this.$notify({title:"提示",message:"代码已更新",position:"bottom-right",type:"success"})}catch(a){this.$message.error(a)}},remove(){this.$emit("remove",{lc_id:this.rawInfoID})},deleteItem(e){this.localAttributes.splice(e,1)},copyBro(){!function(e){let a=Object.create(e.__proto__);Object.assign(a,JSON.parse(JSON.stringify(e))),a.__proto__.parentCodeNode.__children.push(a)}(this.__rawVueInfo__),A.commit("onDragEnd")},onShow(){this.initShortcut()},onHide(){this.destroyShortcut()}},computed:{componentName(){return this.__rawVueInfo__?u(this.__rawVueInfo__):""},rawInfoID(){return this.__rawVueInfo__?r(this.__rawVueInfo__).lc_id:""},enableBroButton(){return[{name:"el-option",ifInDoc:!1},{name:"el-table-column",ifInDoc:!1},{name:"el-checkbox",ifInDoc:!0},{name:"el-radio",ifInDoc:!0}].find((e=>e.name==this.componentName))&&!1},attributeList(){const e=[],a=this.__rawVueInfo__;if(a){const l=a[u(a)];for(const a in l)if(l.hasOwnProperty(a)){const t=l[a];"object"!=typeof t&&"lc-mark"!=a&&"lc_id"!=a&&e.push({key:a,value:t})}}return e},attributeKeys(){return this.localAttributes.map((e=>e.key))}},watch:{attributeList:{handler:function(){this.localAttributes=this.attributeList},immediate:!0},localAttributes(e){0===e.length&&e.push({key:"",value:""}),this.textAttributes=e.map((e=>`${e.key}: ${e.value}`)).join("\n")}}},ne=e=>(S("data-v-2f132553"),e=e(),D(),e),ie={style:{"text-align":"center"}},se={style:{"margin-top":"20px"}},ue={name:"1"},re=ne((()=>h("div",{class:"split"},":",-1))),pe={class:"quick-add-root"},de={style:{"margin-top":"5px"}},ce={name:"2"},me={style:{"margin-top":"10px","text-align":"center"}},ve=ne((()=>h("div",{style:{"text-algin":"center"}},[h("span",{class:"shortcut-tip"},"支持快捷键操作")],-1)));const ye=p(oe,[["render",function(e,a,l,t,o,n){const i=d("lFormA"),s=d("el-divider"),u=d("el-switch"),r=d("el-input"),p=d("Remove"),f=d("el-icon"),_=d("el-tag"),S=d("Plus"),D=d("el-button"),w=d("el-tooltip"),A=d("Refresh"),I=d("Delete"),F=d("document-copy"),N=d("el-scrollbar"),B=d("el-card");return c(),j(B,{class:"attribute-container"},{default:y((()=>[v(N,{height:"calc(100vh - 130px)"},{default:y((()=>["l-form"==n.componentName?(c(),j(i,{key:0,localAttributes:e.localAttributes,"onUpdate:localAttributes":a[0]||(a[0]=a=>e.localAttributes=a),onChildSave:n.childSave},null,8,["localAttributes","onChildSave"])):O("",!0),v(s,{"content-position":"left"},{default:y((()=>[b("特殊处理")])),_:1}),h("div",ie,[v(u,{modelValue:e.editMode,"onUpdate:modelValue":a[1]||(a[1]=a=>e.editMode=a),"active-text":"自由编辑","inactive-text":"约束编辑","active-color":"#13ce66","inactive-color":"#13ce66"},null,8,["modelValue"])]),h("div",se,[C(h("div",ue,[h("div",null,[(c(!0),m(k,null,g(e.localAttributes,((e,a)=>(c(),m("div",{class:"item",key:a},[v(r,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,placeholder:"key"+a,class:"half-width",type:"textarea",autosize:{minRows:2,maxRows:4}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),re,v(r,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"textarea",placeholder:"value"+a,class:"half-width",style:{"flex-grow":"4"},autosize:{minRows:2,maxRows:4}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),v(f,{style:{"margin-left":"5px"},onClick:e=>n.deleteItem(a)},{default:y((()=>[v(p)])),_:2},1032,["onClick"])])))),128)),h("div",pe,[b(" 快速增加一些属性: "),h("div",de,[v(V,{name:"el-zoom-in-center"},{default:y((()=>[-1==n.attributeKeys.indexOf("class")?(c(),j(_,{key:0,size:"small",type:"success",onClick:n.onClassClick,effect:"dark",class:"tag"},{default:y((()=>[b("Class ")])),_:1},8,["onClick"])):O("",!0)])),_:1}),v(V,{name:"el-zoom-in-center"},{default:y((()=>[-1==n.attributeKeys.indexOf("@click")?(c(),j(_,{key:0,size:"small",type:"success",onClick:n.onEventClick,effect:"dark",class:"tag"},{default:y((()=>[b("点击事件")])),_:1},8,["onClick"])):O("",!0)])),_:1}),v(V,{name:"el-zoom-in-center"},{default:y((()=>[n.attributeKeys.includes("__text__")?O("",!0):(c(),j(_,{key:0,size:"small",type:"success",onClick:n.onTextClick,effect:"dark",class:"tag"},{default:y((()=>[b("文本内容")])),_:1},8,["onClick"]))])),_:1})])])])],512),[[x,!e.editMode]]),C(h("div",ce,[v(r,{type:"textarea",autosize:{minRows:4},placeholder:"请输入属性, 以key: value的形式(冒号后要有空格)",modelValue:e.textAttributes,"onUpdate:modelValue":a[2]||(a[2]=a=>e.textAttributes=a)},null,8,["modelValue"])],512),[[x,e.editMode]])]),h("div",me,[v(w,{class:"item",effect:"dark",content:"新增属性 ctrl+a",placement:"bottom"},{default:y((()=>[v(D,{type:"primary",class:"center",onClick:n.createNew,circle:""},{default:y((()=>[v(f,null,{default:y((()=>[v(S)])),_:1})])),_:1},8,["onClick"])])),_:1}),v(w,{class:"item",effect:"dark",content:"保存属性 ctrl+s",placement:"bottom"},{default:y((()=>[v(D,{type:"success",class:"center",onClick:n.save,circle:""},{default:y((()=>[v(f,null,{default:y((()=>[v(A)])),_:1})])),_:1},8,["onClick"])])),_:1}),l.enableRemoveButton?(c(),j(w,{key:0,class:"item",effect:"dark",content:"移除该组件 ctrl+d",placement:"bottom"},{default:y((()=>[v(D,{type:"danger",class:"center",onClick:n.remove,circle:""},{default:y((()=>[v(f,null,{default:y((()=>[v(I)])),_:1})])),_:1},8,["onClick"])])),_:1})):O("",!0),n.enableBroButton?(c(),j(w,{key:1,class:"item",effect:"dark",content:"复制一个兄弟组件 ctrl+c",placement:"bottom"},{default:y((()=>[v(D,{type:"primary",class:"center",onClick:n.copyBro,circle:""},{default:y((()=>[v(f,null,{default:y((()=>[v(F)])),_:1})])),_:1},8,["onClick"])])),_:1})):O("",!0),ve])])),_:1})])),_:1})}],["__scopeId","data-v-2f132553"]]);export{ye as default};

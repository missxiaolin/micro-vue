function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/vcc-CN5O3aga.js","static/js/index-CLHkfek-.js","static/css/index-C13myhDW.css","static/css/vcc-CjzJ_r-5.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var e=(e,t,o)=>new Promise(((r,s)=>{var i=e=>{try{n(o.next(e))}catch(t){s(t)}},a=e=>{try{n(o.throw(e))}catch(t){s(t)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);n((o=o.apply(e,t)).next())}));import{_ as t,g as o,r,o as s,c as i,a,b as n,w as d,h as c,f as u,e as l,i as h,p as m,j as p}from"./index-CLHkfek-.js";import{b as f,c as _}from"./page-BpAL7oaA.js";import{b as y}from"./project-B6La7BE1.js";import"./fetch-C-IdBzoV.js";const v='{"template":{"lc_id":"root","__children":[{"div":{"class":"container","style":"min-height: 100%;","lc_id":"container","__children":[]}}]}}',j="\n{\n  data() {\n    return {\n    };\n  },\n  methods: {\n  },\n}\n";function b(e,t,o){""===t?o(new Error("请输入路由路径")):/^\//.test(t)?o():o(new Error("路由路径必须/开头"))}const g={components:{vcc:o((()=>h((()=>import("./vcc-CN5O3aga.js").then((e=>e.v))),__vite__mapDeps([0,1,2,3]))))},data:()=>({isShowBaseForm:!1,rules:{route_name:[{required:!0,message:"请输入路由名称",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"},{validator:b,trigger:"blur"}]},codeInfoEntity:{codeStructure:"",JSCode:"",mode:1},isShowVcc:!1,formData:{id:0,project_id:0,route_name:"",path:"",tem_json:"",script_json:""}}),mounted(){this.formData.project_id=this.$route.query.projectId||"",this.init()},methods:{init(){return e(this,null,(function*(){if(!this.formData.project_id)return void this.$message.error({message:"项目id不能为空",duration:2e3,onClose:()=>{this.$router.push({path:"/bba/list"})}});let e=yield y({id:this.formData.project_id});if(!e.success||0==e.model.length)return setTimeout((()=>{this.$router.push({path:"/vcc/index",query:{projectId:this.$route.query.projectId}})}),2e3),!1;if(this.codeInfoEntity.mode=e.model.type,this.$route.query.id&&0!=this.$route.query.id){let e=yield f({id:this.$route.query.id,projectId:this.$route.query.projectId});if(!e.success||0==e.model.length)return setTimeout((()=>{this.$router.push({path:"/vcc/index",query:{projectId:this.$route.query.projectId}})}),2e3),!1;this.formData=e.model,this.codeInfoEntity.codeStructure=JSON.parse(e.model.tem_json),this.codeInfoEntity.JSCode=e.model.script_json}else this.codeInfoEntity.codeStructure=JSON.parse(v),this.codeInfoEntity.JSCode=j,this.formData.tem_json=v,this.formData.script_json=j;this.isShowBaseForm=!0,this.isShowVcc=!0,this.isShowBaseForm=!1}))},onCodeUpdate({codeRawVueInfo:e,JSCode:t}){this.formData.tem_json=JSON.stringify(e),this.formData.script_json=t},onLoadFinish(){},submitForm(t){return e(this,null,(function*(){const e=this.$refs[t];e&&(yield e.validate(((e,t)=>{e&&(this.isShowVcc=!0,this.isShowBaseForm=!1)})))}))},goVccIndex(){this.$router.push({path:"/vcc/index",query:{projectId:this.formData.project_id}},1e3)},save(t){return e(this,null,(function*(){let e=this.formData;e.page_html=t,(yield _(e)).success&&(this.$message({message:"保存成功",type:"success"}),setTimeout((()=>{this.$router.push({path:"/vcc/index",query:{projectId:this.formData.project_id}},1e3)}),2e3))}))}}},I={class:"vcc-detaiil-box"},S={key:0,class:"vcc-base-box"},D=(e=>(m("data-v-d985fb3e"),e=e(),p(),e))((()=>a("div",{class:"vcc-body-header"},"基础信息",-1))),w={class:"vcc-body-content"},E={class:"form-bottom-box"};const $=t(g,[["render",function(e,t,o,h,m,p){const f=r("el-input"),_=r("el-form-item"),y=r("el-button"),v=r("el-form"),j=r("vcc");return s(),i("div",I,[m.isShowBaseForm?(s(),i("div",S,[D,a("div",w,[n(v,{ref:"ruleFormRef",model:m.formData,rules:m.rules,"label-width":"auto"},{default:d((()=>[n(_,{label:"路由名称",prop:"route_name"},{default:d((()=>[n(f,{modelValue:m.formData.route_name,"onUpdate:modelValue":t[0]||(t[0]=e=>m.formData.route_name=e)},null,8,["modelValue"])])),_:1}),n(_,{label:"路由路径",prop:"path"},{default:d((()=>[n(f,{disabled:!!m.formData.id,modelValue:m.formData.path,"onUpdate:modelValue":t[1]||(t[1]=e=>m.formData.path=e)},null,8,["disabled","modelValue"])])),_:1}),n(_,null,{default:d((()=>[a("div",E,[n(y,{onClick:p.goVccIndex},{default:d((()=>[l("取消")])),_:1},8,["onClick"]),n(y,{type:"primary",onClick:t[2]||(t[2]=e=>p.submitForm("ruleFormRef"))},{default:d((()=>[l(" 保存 ")])),_:1})])])),_:1})])),_:1},8,["model","rules"])])])):c("",!0),m.isShowVcc?(s(),u(j,{key:1,initCodeEntity:m.codeInfoEntity,onUpdateCodeEntity:p.onCodeUpdate,onOnLoadFinish:p.onLoadFinish,onSave:p.save},null,8,["initCodeEntity","onUpdateCodeEntity","onOnLoadFinish","onSave"])):c("",!0)])}],["__scopeId","data-v-d985fb3e"]]);export{$ as default};

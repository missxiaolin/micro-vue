var e=(e,t,l)=>new Promise(((a,o)=>{var s=e=>{try{r(l.next(e))}catch(t){o(t)}},i=e=>{try{r(l.throw(e))}catch(t){o(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,i);r((l=l.apply(e,t)).next())}));import{p as t,a as l}from"./project-D8bGReVt.js";import{_ as a,E as o,r as s,o as i,c as r,a as p,b as u,w as n,F as d,d as c,e as m,f as h}from"./index-N6TzNT3V.js";import"./fetch-CVO3J43M.js";const b={class:"vue-home-main"},g={class:"mu-search-container pall10"},v={class:"mu-search-form-button"},f={class:"mu-handle-content"};const y=a({data:()=>({dialogVisible:!1,popTitle:"创建项目",formSaveBtn:"保存",formDisbled:!1,popShowBottomBtn:!0,searchForm:{name:"",type:"",status:"",pageSize:10,page:1},statusOptions:[{value:"1",label:"禁用"},{value:"2",label:"启用"}],typeOptions:[{value:"1",label:"电脑端"},{value:"2",label:"移动端"}],columns:[{label:"项目名称",prop:"name"},{label:"三字码",prop:"code"},{label:"项目描述",prop:"desc"},{label:"项目类型",prop:"type_desc"},{label:"项目状态",prop:"status_desc"},{label:"创建时间",prop:"create_time"},{label:"修改时间",prop:"update_time"},{width:"180px",label:"操作",prop:"options",noEmptyValue:!0}],tableData:[],total:0,btnPopForm:[{key:"type",default:1,type:"radio",label:"项目类型",dataOptions:[{label:"pc",value:1},{label:"mobile",value:2}],placeholder:"请选择项目类型",value:"",rules:[{required:!0,message:"请选择项目类型"}]},{key:"code",default:"",type:"input",label:"三字码",data:"",placeholder:"请输入项目三字码",value:"",rules:[{required:!0,message:"请输入项目三字码",trigger:"blur"},{max:3,message:"请输入英文3个字符串",trigger:"blur"}]},{key:"name",default:"",type:"input",label:"项目名称",data:"",placeholder:"请输入项目名称",value:"",rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{key:"desc",default:"",type:"input",label:"项目描述",data:"",placeholder:"请输入项目描述",value:"",rules:[{required:!0,message:"请输入项目描述",trigger:"blur"}]},{key:"status",default:2,type:"radio",label:"是否禁用",dataOptions:[{label:"禁用",value:1},{label:"开启",value:2}],value:"",rules:[{required:!0,message:"请选择是否禁用"}]}],projectDetail:{}}),mounted(){this.getProjectList()},methods:{handleCurrentChange(e){this.searchForm.page=e,this.getProjectList()},resetForm(){this.searchForm={name:"",type:"",status:"",pageSize:10,page:1},this.getProjectList()},getProjectList(){return e(this,null,(function*(){let e=yield t(this.searchForm);e.success&&(this.tableData=e.model.list,this.total=e.model.count)}))},popClick(e){this.dialogVisible=e,this.projectDetail={},this.popTitle="创建项目",this.formSaveBtn="保存",this.formDisbled=!1},edit(e){this.projectDetail=e,this.dialogVisible=!0,this.popTitle="修改项目",this.formSaveBtn="修改",this.popShowBottomBtn=!0},detail(e){this.projectDetail=e,this.dialogVisible=!0,this.popTitle="项目详情",this.formDisbled=!0,this.formSaveBtn="修改",this.popShowBottomBtn=!1},popSuccess(t){return e(this,null,(function*(){this.projectDetail&&(t.id=this.projectDetail&&this.projectDetail.id?this.projectDetail.id:""),(yield l(t)).success&&(o({message:t.id?"修改成功":"添加成功",type:"success"}),this.projectDetail={},this.popTitle="创建项目",this.formSaveBtn="保存",this.dialogVisible=!1,this.getProjectList())}))},goRoutePage(e){this.$router.push({path:"/vcc/index",query:{projectId:e.id}})}}},[["render",function(e,t,l,a,o,y){const k=s("el-input"),C=s("search-label"),_=s("el-col"),j=s("el-option"),D=s("el-select"),S=s("el-row"),F=s("el-button"),V=s("l-pop"),w=s("l-table");return i(),r("div",b,[p("div",g,[u(S,null,{default:n((()=>[u(_,{span:8},{default:n((()=>[u(C,{labelName:"项目名称"},{default:n((()=>[u(k,{modelValue:o.searchForm.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchForm.name=e),placeholder:"请输入项目名称"},null,8,["modelValue"])])),_:1})])),_:1}),u(_,{span:8},{default:n((()=>[u(C,{labelName:"分类"},{default:n((()=>[u(D,{modelValue:o.searchForm.type,"onUpdate:modelValue":t[1]||(t[1]=e=>o.searchForm.type=e),placeholder:"请选择分类"},{default:n((()=>[(i(!0),r(d,null,c(o.typeOptions,(e=>(i(),h(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),u(_,{span:8},{default:n((()=>[u(C,{labelName:"状态"},{default:n((()=>[u(D,{modelValue:o.searchForm.status,"onUpdate:modelValue":t[2]||(t[2]=e=>o.searchForm.status=e),placeholder:"请选择分类"},{default:n((()=>[(i(!0),r(d,null,c(o.statusOptions,(e=>(i(),h(j,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),p("div",v,[u(F,{onClick:y.resetForm},{default:n((()=>[m("重置")])),_:1},8,["onClick"]),u(F,{type:"primary",onClick:y.getProjectList},{default:n((()=>[m("查询")])),_:1},8,["onClick"])])]),p("div",f,[u(V,{"btn-text":"创建项目",detail:o.projectDetail,title:o.popTitle,disabled:o.formDisbled,"form-save-btn":o.formSaveBtn,"dialog-visible":o.dialogVisible,"btn-pop-form":o.btnPopForm,"is-show-bottom-btn":o.popShowBottomBtn,onPopClick:y.popClick,onSuccess:y.popSuccess},null,8,["detail","title","disabled","form-save-btn","dialog-visible","btn-pop-form","is-show-bottom-btn","onPopClick","onSuccess"])]),u(w,{data:o.tableData,columns:o.columns,"page-size":o.searchForm.pageSize,total:o.total,onHandleCurrentChange:y.handleCurrentChange},{options:n((e=>[u(F,{link:"",type:"primary",size:"small",onClick:t=>y.edit(e.row)},{default:n((()=>[m("修改")])),_:2},1032,["onClick"]),u(F,{link:"",type:"primary",size:"small",onClick:t=>y.detail(e.row)},{default:n((()=>[m("详情")])),_:2},1032,["onClick"]),u(F,{link:"",type:"primary",size:"small",onClick:t=>y.goRoutePage(e.row)},{default:n((()=>[m("路由列表")])),_:2},1032,["onClick"])])),_:1},8,["data","columns","page-size","total","onHandleCurrentChange"])])}],["__scopeId","data-v-2b9173ab"]]);export{y as default};

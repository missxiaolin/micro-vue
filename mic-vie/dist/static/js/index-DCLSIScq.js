var e=(e,t,a)=>new Promise(((l,o)=>{var r=e=>{try{i(a.next(e))}catch(t){o(t)}},s=e=>{try{i(a.throw(e))}catch(t){o(t)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(r,s);i((a=a.apply(e,t)).next())}));import{p as t,a}from"./page-VqFWByiD.js";import{_ as l,r as o,o as r,c as s,a as i,b as c,w as n,e as p}from"./index-DrtAAlYW.js";import"./fetch-0B10NSx1.js";const u={class:"vcc-index-box"},d={class:"mu-search-container pall10"},h={class:"mu-search-form-button"},m={class:"mu-handle-content"};const g=l({data:()=>({isClickPage:!1,projectId:0,searchForm:{projectId:0,route_name:"",path:"",pageSize:10,page:1},tableData:[],columns:[{label:"路由名称",prop:"route_name"},{label:"路由路径",prop:"path"},{label:"创建时间",prop:"create_time"},{label:"修改时间",prop:"update_time"},{label:"状态",prop:"status_desc"},{width:"150px",label:"操作",prop:"options",noEmptyValue:!0}],total:0}),mounted(){this.projectId=this.$route.query.projectId||0,this.getPage()},methods:{getPage(){return e(this,null,(function*(){let e=this.searchForm;e.projectId=this.projectId;let a=yield t(e);a.success&&(this.tableData=a.model.list,this.total=a.model.count)}))},goRoute(){this.$router.push({path:"/vcc/detail",query:{projectId:this.projectId}})},edit(e){this.$router.push({path:"/vcc/detail",query:{id:e.id,projectId:this.projectId}})},handleCurrentChange(e){this.searchForm.page=e,this.getPage()},resetForm(){this.searchForm={route_name:"",path:"",pageSize:10,page:1}},generatePage(t){return e(this,null,(function*(){if(this.isClickPage)return;let e;this.isClickPage=!0;try{e=yield a({projectId:this.projectId,id:t.id})}catch(l){this.isClickPage=!1}this.isClickPage=!1,e.success&&(this.getPage(),this.$message({message:"页面生成中",type:"success"}))}))}}},[["render",function(e,t,a,l,g,C){const _=o("el-input"),f=o("search-label"),y=o("el-col"),b=o("el-row"),k=o("el-button"),j=o("l-table");return r(),s("div",u,[i("div",d,[c(b,null,{default:n((()=>[c(y,{span:8},{default:n((()=>[c(f,{labelName:"路由名称"},{default:n((()=>[c(_,{modelValue:g.searchForm.route_name,"onUpdate:modelValue":t[0]||(t[0]=e=>g.searchForm.route_name=e),placeholder:"请输入路由名称"},null,8,["modelValue"])])),_:1})])),_:1}),c(y,{span:8},{default:n((()=>[c(f,{labelName:"路由路径"},{default:n((()=>[c(_,{modelValue:g.searchForm.path,"onUpdate:modelValue":t[1]||(t[1]=e=>g.searchForm.path=e),placeholder:"请输入路由路径"},null,8,["modelValue"])])),_:1})])),_:1}),c(y,{span:8})])),_:1}),i("div",h,[c(k,{onClick:C.resetForm},{default:n((()=>[p("重置")])),_:1},8,["onClick"]),c(k,{type:"primary",onClick:C.getPage},{default:n((()=>[p("查询")])),_:1},8,["onClick"])])]),i("div",m,[c(k,{type:"primary",onClick:C.goRoute},{default:n((()=>[p("创建页面")])),_:1},8,["onClick"])]),c(j,{data:g.tableData,columns:g.columns,"page-size":g.searchForm.pageSize,total:g.total,onHandleCurrentChange:C.handleCurrentChange},{options:n((e=>[c(k,{link:"",type:"primary",size:"small",onClick:t=>C.edit(e.row)},{default:n((()=>[p("修改")])),_:2},1032,["onClick"]),c(k,{link:"",type:"primary",size:"small",onClick:t=>C.generatePage(e.row)},{default:n((()=>[p("生成页面")])),_:2},1032,["onClick"])])),_:1},8,["data","columns","page-size","total","onHandleCurrentChange"])])}]]);export{g as default};

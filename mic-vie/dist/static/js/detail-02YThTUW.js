function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/vcc-D7OGv0iS.js","static/js/index-Cj2os65E.js","static/css/index-Cv0Zsx7x.css","static/css/vcc-CEGX-mAi.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var e=(e,t,o)=>new Promise(((s,a)=>{var r=e=>{try{n(o.next(e))}catch(t){a(t)}},i=e=>{try{n(o.throw(e))}catch(t){a(t)}},n=e=>e.done?s(e.value):Promise.resolve(e.value).then(r,i);n((o=o.apply(e,t)).next())}));import{_ as t,g as o,c as s,a,b as r,w as i,h as n,f as d,r as c,o as l,e as u,p as m,i as h,j as p}from"./index-Cj2os65E.js";import{b as f,c as _}from"./page-BP9TmjX9.js";import"./fetch-DEXTXY6q.js";const y='{"template":{"lc_id":"root","__children":[{"div":{"class":"container","style":"min-height: 100%;","lc_id":"container","__children":[]}}]}}',v="\n{\n  data() {\n    return {\n    };\n  },\n  methods: {\n  },\n}\n",j={components:{vcc:o((()=>p((()=>import("./vcc-D7OGv0iS.js").then((e=>e.v))),__vite__mapDeps([0,1,2,3]))))},data:()=>({isShowBaseForm:!1,rules:{route_name:[{required:!0,message:"请输入路由名称",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}]},codeInfoEntity:{codeStructure:"",JSCode:""},isShowVcc:!1,formData:{id:0,project_id:0,route_name:"",path:"",tem_json:"",script_json:""}}),mounted(){this.formData.project_id=this.$route.query.projectId||"",this.init()},methods:{init(){return e(this,null,(function*(){if(this.formData.project_id){if(this.$route.query.id&&0!=this.$route.query.id){let e=yield f({id:this.$route.query.id,projectId:this.$route.query.projectId});if(!e.success||0==e.model.length)return setTimeout((()=>{this.$router.push({path:"/vcc/index",query:{projectId:this.$route.query.projectId}})}),2e3),!1;this.formData=e.model,this.codeInfoEntity.codeStructure=JSON.parse(e.model.tem_json),this.codeInfoEntity.JSCode=e.model.script_json}else this.codeInfoEntity.codeStructure=JSON.parse(y),this.codeInfoEntity.JSCode=v,this.formData.tem_json=y,this.formData.script_json=v;this.isShowBaseForm=!0}else this.$message.error({message:"项目id不能为空",duration:2e3,onClose:()=>{this.$router.push({path:"/bba/list"})}})}))},onCodeUpdate({codeRawVueInfo:e,JSCode:t}){this.formData.tem_json=JSON.stringify(e),this.formData.script_json=t},onLoadFinish(){},submitForm(t){return e(this,null,(function*(){const e=this.$refs[t];e&&(yield e.validate(((e,t)=>{e&&(this.isShowVcc=!0,this.isShowBaseForm=!1)})))}))},goVccIndex(){this.$router.push({path:"/vcc/index",query:{projectId:this.formData.project_id}},1e3)},save(t){return e(this,null,(function*(){let e=this.formData;e.page_html=t,(yield _(e)).success&&(this.$message({message:"保存成功",type:"success"}),setTimeout((()=>{this.$router.push({path:"/vcc/index",query:{projectId:this.formData.project_id}},1e3)}),2e3))}))}}},b={class:"vcc-detaiil-box"},S={key:0,class:"vcc-base-box"},g=(e=>(m("data-v-805f46e9"),e=e(),h(),e))((()=>a("div",{class:"vcc-body-header"},"基础信息",-1))),D={class:"vcc-body-content"},I={class:"form-bottom-box"};const C=t(j,[["render",function(e,t,o,m,h,p){const f=c("el-input"),_=c("el-form-item"),y=c("el-button"),v=c("el-form"),j=c("vcc");return l(),s("div",b,[h.isShowBaseForm?(l(),s("div",S,[g,a("div",D,[r(v,{ref:"ruleFormRef",model:h.formData,rules:h.rules,"label-width":"auto"},{default:i((()=>[r(_,{label:"路由名称",prop:"route_name"},{default:i((()=>[r(f,{modelValue:h.formData.route_name,"onUpdate:modelValue":t[0]||(t[0]=e=>h.formData.route_name=e)},null,8,["modelValue"])])),_:1}),r(_,{label:"路由路径",prop:"path"},{default:i((()=>[r(f,{disabled:!!h.formData.id,modelValue:h.formData.path,"onUpdate:modelValue":t[1]||(t[1]=e=>h.formData.path=e)},null,8,["disabled","modelValue"])])),_:1}),r(_,null,{default:i((()=>[a("div",I,[r(y,{onClick:p.goVccIndex},{default:i((()=>[u("取消")])),_:1},8,["onClick"]),r(y,{type:"primary",onClick:t[2]||(t[2]=e=>p.submitForm("ruleFormRef"))},{default:i((()=>[u(" 保存 ")])),_:1})])])),_:1})])),_:1},8,["model","rules"])])])):n("",!0),h.isShowVcc?(l(),d(j,{key:1,initCodeEntity:h.codeInfoEntity,onUpdateCodeEntity:p.onCodeUpdate,onOnLoadFinish:p.onLoadFinish,onSave:p.save},null,8,["initCodeEntity","onUpdateCodeEntity","onOnLoadFinish","onSave"])):n("",!0)])}],["__scopeId","data-v-805f46e9"]]);export{C as default};

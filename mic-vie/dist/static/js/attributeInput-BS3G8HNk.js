var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{k as s,g as u,a as r}from"./vcc-BxiFzr0g.js";import{_ as p,r as d,o as c,c as m,b as v,w as y,e as b,a as h,F as f,d as k,A as g,h as _,V as O,f as C,v as j,T as S,x as V,p as x,j as A}from"./index-ChpQSgQz.js";import{c as w}from"./index-CdzCDlSj.js";import{s as D}from"./store-Dleh8tcl.js";const I={class:"attribute-style-box"},N={class:"attribute-seeting-content"},F={class:"label"},B={key:0,class:"attribute-seeting-content-item-content"},M={key:1,class:"attribute-seeting-content-item-content"};const P=p({props:["localAttributes"],data:()=>({styleData:[{name:"宽度",key:"width",type:"input",value:""},{name:"高度",key:"height",type:"input",value:""},{name:"字体颜色",key:"color",type:"color",value:""},{name:"背景颜色",key:"background-color",type:"color",value:""}],styleCode:""}),mounted(){this.init(this.localAttributes);document.getElementsByClassName("el-color-dropdown").forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation()}))}))},watch:{styleData:{handler(e){this.codeStyleAttributes(e)},deep:!0}},methods:{init(e){const a=e.filter((e=>"style"===e.key));if(!a||0==a.length)return;this.styleCode=a[0].value;const t=this.parseStyleString(a[0].value);this.styleData.forEach((e=>{t[e.key]&&(e.value=t[e.key])}))},parseStyleString(e){if(!e)return;const a=e.split(";").filter(Boolean),t={};return a.forEach((e=>{const[a,l]=e.split(":").map((e=>e.trim()));a&&l&&(t[a]=l)})),t},codeStyleAttributes(e){let a="";e.forEach((e=>{e.value&&(a+=`${e.key}: ${e.value}; `)}));let t=this.mergeStyles(this.styleCode,a);this.$emit("childSave","style",`${t}`)},mergeStyles(e,a){const t=e.split(";").filter(Boolean),l=a.split(";").filter(Boolean);for(let o=0;o<l.length;o++){const[e,a]=l[o].split(":");if(e&&a){const n=e.trim().toLowerCase(),i=t.findIndex((e=>e.toLowerCase().startsWith(n+":")));-1!==i?t[i]=`${e}: ${a}`:t.push(l[o])}}return t.join("; ")},clickProp(e){e.stopPropagation()}}},[["render",function(e,a,t,l,o,n){const i=d("el-divider"),s=d("el-input"),u=d("el-color-picker");return c(),m("div",I,[v(i,{"content-position":"left"},{default:y((()=>[b("样式处理")])),_:1}),h("div",N,[(c(!0),m(f,null,k(o.styleData,((e,a)=>(c(),m("div",{class:"attribute-seeting-content-item",key:a},[h("div",F,g(e.name)+"：",1),"input"===e.type?(c(),m("div",B,[v(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a},null,8,["modelValue","onUpdate:modelValue"])])):_("",!0),"color"===e.type?(c(),m("div",M,[v(u,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,onClick:n.clickProp,class:"aa"},null,8,["modelValue","onUpdate:modelValue","onClick"])])):_("",!0)])))),128))])])}]]),U=[{name:"自定补全输入框",label:"",valueName:"",value:"",type:"autocomplete",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"回调函数",key:"fetchSuggestions",value:"",type:"function"}]},{name:"多选框",label:"",valueName:"",value:"",type:"checkbox-group",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"勾选最小数量",key:"min",value:""},{name:"勾选最大数量",key:"max",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"}]},{name:"日期选择器",label:"",valueName:"",value:"",type:"date-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"显示类型",key:"type",value:"",type:"data",data:[{label:"时间区间(年月日时分秒)",value:"datetimerange"},{label:"时间区间(年月日)",value:"daterange"},{label:"年月日时分秒",value:"datetime"},{label:"按周形式选择",value:"week"},{label:"年",value:"year"},{label:"月",value:"month"},{label:"日",value:"date"}]},{name:"时间格式",key:"format",value:"",type:"data",data:[{label:"年-月-日",value:"YYYY-MM-DD"},{label:"年-月-日 时:分:秒",value:"YYYY-MM-DD HH:mm:ss"}]},{name:"分隔符",key:"range-separator",value:""},{name:"默认显示日期",key:"default-value",value:""},{name:"绑定值时间格式",key:"value-format",value:"",type:"data",data:[{label:"年-月-日",value:"YYYY-MM-DD"},{label:"年-月-日 时:分:秒",value:"YYYY-MM-DD HH:mm:ss"}]},{name:"确认选定的值时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点触发",key:"onBlur",value:"",type:"function"},{name:"获取焦点触发",key:"onFocus",value:"",type:"function"},{name:"calendar-change",key:"calendar-change",value:"",type:"function"}]},{name:"输入框",label:"",valueName:"",value:"",type:"input",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"最大长度",key:"maxlength",value:""},{name:"最小长度",key:"minlength",value:""},{name:"占位文本",key:"placeholder",value:""},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否显示统计字数",key:"show-word-limit",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否显示密码图标",key:"show-password",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"类型",key:"type",value:"",type:"data",data:[{label:"文本",value:"text"},{label:"多行文本",value:"textarea"},{label:"密码",value:"password"}]},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"},{name:"输入框失去焦点触发",key:"onChange",value:"",type:"function"},{name:"值改变时触发",key:"onInput",value:"",type:"function"},{name:"clearable属性清空触发",key:"onClear",value:"",type:"function"}]},{name:"数字输入框",label:"",valueName:"",value:"",type:"date-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"最小值",key:"min",value:""},{name:"最大值",key:"max",value:""},{name:"计数器步长",key:"step",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否使用控制按钮",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"单选按钮",label:"",valueName:"",value:"",type:"radio-group",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"}]},{name:"下拉选择器",label:"",valueName:"",value:"",type:"select",options:[],rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否多选",key:"multiple",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值变化时触发",key:"onChange",value:"",type:"function"},{name:"多选时移除触发",key:"remove-tag",value:"",type:"function"},{name:"点击清空按钮时触发",key:"onClear",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"时间选择器",label:"",valueName:"",value:"",type:"time-picker",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"文本框是否可输入",key:"editable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否为时间范围选择",key:"is-range",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"输入框中的格式",key:"format",value:"",type:"data",data:[{label:"时:分:秒",value:"HH:mm:ss"}]},{name:"绑定值的格式",key:"value-format",value:"",type:"data",data:[{label:"时:分:秒",value:"HH:mm:ss"}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]},{name:"时间选择",label:"",valueName:"",value:"",type:"time-select",rule:{isRequire:!1,errorMessage:""},propsData:{},propsDataSelects:[{name:"占位文本",key:"placeholder",value:""},{name:"开始时间",key:"start",value:""},{name:"结束时间",key:"end",value:""},{name:"间隔时间",key:"step",value:""},{name:"原生属性",key:"name",value:""},{name:"最早时间点",key:"min-time",value:""},{name:"最晚时间点",key:"max-time",value:""},{name:"是否禁用",key:"disabled",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"文本框是否可输入",key:"editable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"是否可清空",key:"clearable",value:"",type:"data",data:[{label:"是",value:!0},{label:"否",value:!1}]},{name:"绑定值被改变时触发",key:"onChange",value:"",type:"function"},{name:"失去焦点时触发",key:"onBlur",value:"",type:"function"},{name:"获得焦点时触发",key:"onFocus",value:"",type:"function"}]}],R={components:{VNode:O,editor:w},props:["localAttributes","componentName"],inject:["vccApp"],watch:{componentName:{handler(e){this.localAttributes.forEach((a=>{":formSaveBtn"==a.key?this.formSaveBtn=a.value?a.value.replace(/['']/g,""):"l-form"==e?"保存":"搜索":this.formSaveBtn="l-form"==e?"保存":"搜索"}))},deep:!0}},data(){return{formSaveBtn:"l-form"==this.componentName?"保存":"查询",formArr:U,editIndex:"",popObj:{},isAddFn:!1,codeFn:"return (e) => {\n    // this.vue 就是vue的当前实例\n    console.log(e, this.vue);\n}\n",fnObj:{},rules:{label:[{required:!0,message:"请输入名称",trigger:"blur"}],valueName:[{required:!0,message:"请输入绑定数据字段",trigger:"blur"}]},isShowFormAPop:!1,jsCode:"",formItem:[]}},mounted(){this.jsCode=this.vccApp.mainPanelProvider.getComponentOptions(),this.init(this.localAttributes)},methods:{inputFormSaveBtn(e){this.$emit("childSave",":formSaveBtn",`'${e}'`)},init(e){e.forEach((e=>{":form"==e.key&&(this.formItem=this.jsCode.data()[e.value]||[],this.formItemKey=e.value),":formSaveBtn"==e.key&&(this.formSaveBtn=e.value?e.value.replace(/['']/g,""):"l-form"==this.componentName?"保存":"搜索")}))},formSelectBtn(e){e.stopPropagation()},editForm(e,s){this.editIndex=s;let u=JSON.parse(JSON.stringify(this.formArr)).find((a=>a.type===e.type));if(!u)return void this.$message.error("该控件无法编辑");let r=(p=((e,a)=>{for(var t in a||(a={}))o.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&i(e,t,a[t]);return e})({},u),d={propsData:e.propsData,label:e.label,valueName:e.valueName,value:e.value,options:e.options||[],rule:{isRequire:e.rule.length>0&&e.rule[0].required,errorMessage:e.rule.length>0?e.rule[0].message:""},propsData:e.propsData},a(p,t(d)));var p,d;["checkbox-group"].indexOf(this.popObj.type)>-1&&(r.value=e.value&&e.value.length>0?e.value.join(","):""),this.popObj=r,this.isAddFn=!1,this.isShowFormAPop=!0},selectBtn(e){this.editIndex="";let a=JSON.parse(JSON.stringify(U[e]));this.popObj=a,this.isAddFn=!1,this.isShowFormAPop=!0},propsClick(e){if("function"===e.type)return this.fnObj=JSON.parse(JSON.stringify(e)),void(this.isAddFn=!0);this.popObj.propsData[e.key]=e.value||""},clockFn(){this.isAddFn=!1},editFn(e,a){this.fnObj=JSON.parse(JSON.stringify(e)),this.fnObj.value=a,this.isAddFn=!0},saveFn(){const e=this.$refs.codeEditor.getEditorCode();this.popObj.propsData[this.fnObj.key]=e,this.isAddFn=!1},radioChage(e){e?this.rules.rule={errorMessage:[{required:!0,message:"请输入提示",trigger:"blur"}]}:delete this.rules.rule},deleteProps(e){delete this.popObj.propsData[e]},addOption(){this.popObj.options.push({label:"",value:""})},deleteOption(e){this.popObj.options.splice(e,1)},submitForm(e){return a=this,t=null,l=function*(){const a=this.$refs[e];a&&(yield a.validate(((e,a)=>{if(e){let e={label:this.popObj.label,valueName:this.popObj.valueName,value:this.popObj.value,type:this.popObj.type,rule:this.popObj.rule,propsData:this.popObj.propsData};["checkbox-group"].indexOf(this.popObj.type)>-1&&(e.value=this.popObj.value?this.popObj.value.split(","):[]),["checkbox-group","radio-group","select"].indexOf(this.popObj.type)>-1&&(e.options=this.popObj.options||[]),0===this.editIndex||this.editIndex?this.formItem[this.editIndex]=e:this.formItem.push(e),this.viewSaveJs(),this.isShowFormAPop=!1}})))},new Promise(((e,o)=>{var n=e=>{try{s(l.next(e))}catch(a){o(a)}},i=e=>{try{s(l.throw(e))}catch(a){o(a)}},s=a=>a.done?e(a.value):Promise.resolve(a.value).then(n,i);s((l=l.apply(a,t)).next())}));var a,t,l},removeItem(e){let a=this.formItem,t=e;a=a.slice(0,t).concat(a.slice(t+1)),this.formItem=a,this.viewSaveJs()},editP(e){var a,t,l;0!=e&&(a=this.formItem,t=e,l=e-1,[a[t],a[l]]=[a[l],a[t]],this.viewSaveJs())},viewSaveJs(e=[]){const a={[this.formItemKey]:JSON.parse(JSON.stringify(this.formItem))};this.vccApp.viewSaveJs(a,e)}}},$={class:"attribute-seeting-box"},q={class:"attribute-seeting-content"},E={class:"attribute-seeting-content-item"},J=h("div",{class:"label"},"提交按钮：",-1),Y={class:"attribute-seeting-content-item-content"},z={key:0,class:"l-form-b"},H=["onClick"],L={class:"label"},K={class:"value"},T={class:"icon-right"},W=h("div",{class:"optionn-label"},"名称：",-1),G={class:"optionn-value"},Q=h("div",{class:"icon-right"},null,-1),X=h("div",{class:"optionn-label"},"绑定字段：",-1),Z={class:"optionn-value"},ee=["onClick"],ae={style:{width:"100%"}},te={class:"flex"},le=["onClick"],oe=["onClick"],ne={key:0},ie={class:"form-bottom"},se={key:1,class:"fn-box"},ue={class:"form-bottom mt20"};const re={components:{styleComponent:P,lFormA:p(R,[["render",function(e,a,t,l,o,n){const i=d("el-divider"),s=d("el-input"),u=d("RemoveFilled"),r=d("el-icon"),p=d("VNode"),O=d("Top"),j=d("Edit"),S=d("el-button"),V=d("el-popover"),x=d("el-form-item"),A=d("el-radio"),w=d("el-radio-group"),D=d("Plus"),I=d("el-option"),N=d("el-select"),F=d("el-form"),B=d("editor"),M=d("el-dialog");return c(),m("div",$,[v(i,{"content-position":"left"},{default:y((()=>[b("自定义表单")])),_:1}),h("div",q,[h("div",E,[J,h("div",Y,[v(s,{placeholder:"请输入提交按钮文案",modelValue:o.formSaveBtn,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formSaveBtn=e),onInput:n.inputFormSaveBtn},null,8,["modelValue","onInput"])])]),o.formItem.length>0?(c(),m("div",z,[(c(!0),m(f,null,k(o.formItem,((e,a)=>(c(),m("div",{key:a,class:"l-form-b-li"},[h("div",{class:"icon-left",onClick:e=>n.removeItem(a)},[v(r,null,{default:y((()=>[v(u)])),_:1})],8,H),h("div",L,g(e.label),1),h("div",K,[v(p,{content:e,isEscapeFn:!1},null,8,["content"])]),h("div",T,[v(r,{class:"mr5",onClick:e=>n.editP(a)},{default:y((()=>[v(O)])),_:2},1032,["onClick"]),v(r,{onClick:t=>n.editForm(e,a)},{default:y((()=>[v(j)])),_:2},1032,["onClick"])])])))),128))])):_("",!0),v(V,{placement:"left-start",trigger:"hover"},{reference:y((()=>[v(S,null,{default:y((()=>[b("添加表单")])),_:1})])),default:y((()=>[h("div",{class:"form-select-btn",onClick:a[1]||(a[1]=(...e)=>n.formSelectBtn&&n.formSelectBtn(...e))},[(c(!0),m(f,null,k(o.formArr,((e,a)=>(c(),C(S,{key:a,onClick:e=>n.selectBtn(a)},{default:y((()=>[b(g(e.name),1)])),_:2},1032,["onClick"])))),128))])])),_:1})]),v(M,{modelValue:o.isShowFormAPop,"onUpdate:modelValue":a[10]||(a[10]=e=>o.isShowFormAPop=e),title:o.isAddFn?"添加方法":`添加表单${o.popObj.name}`},{default:y((()=>[o.isAddFn?(c(),m("div",se,[v(B,{value:o.fnObj&&o.fnObj.value?o.fnObj.value:o.codeFn,height:"200px",ref:"codeEditor"},null,8,["value"]),h("div",ue,[v(S,{type:"primary",onClick:n.saveFn},{default:y((()=>[b("添加")])),_:1},8,["onClick"]),v(S,{type:"primary",onClick:n.clockFn},{default:y((()=>[b("返回")])),_:1},8,["onClick"])])])):(c(),C(F,{key:0,ref:"ruleFormARef",model:o.popObj,rules:o.rules,"label-width":"auto","status-icon":""},{default:y((()=>[v(x,{label:"字段名称：",prop:"label"},{default:y((()=>[v(s,{modelValue:o.popObj.label,"onUpdate:modelValue":a[2]||(a[2]=e=>o.popObj.label=e)},null,8,["modelValue"])])),_:1}),v(x,{label:"字段名：",prop:"valueName"},{default:y((()=>[v(s,{modelValue:o.popObj.valueName,"onUpdate:modelValue":a[3]||(a[3]=e=>o.popObj.valueName=e),placeholder:"请输入用于后端解析的英文字段名"},null,8,["modelValue"])])),_:1}),v(x,{label:"默认值：",prop:"value"},{default:y((()=>[v(s,{modelValue:o.popObj.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.popObj.value=e),placeholder:"请输入绑定默认值多选框按照,隔开"},null,8,["modelValue"])])),_:1}),v(x,{label:"是否必填：",prop:"popObj.rule.isRequire"},{default:y((()=>[v(w,{modelValue:o.popObj.rule.isRequire,"onUpdate:modelValue":a[5]||(a[5]=e=>o.popObj.rule.isRequire=e),onChange:n.radioChage},{default:y((()=>[v(A,{label:!1},{default:y((()=>[b("不必填")])),_:1}),v(A,{label:!0},{default:y((()=>[b("必填")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),o.popObj.rule.isRequire?(c(),C(x,{key:0,label:"必填提示：",prop:"rule.errorMessage"},{default:y((()=>[v(s,{modelValue:o.popObj.rule.errorMessage,"onUpdate:modelValue":a[6]||(a[6]=e=>o.popObj.rule.errorMessage=e)},null,8,["modelValue"])])),_:1})):_("",!0),["checkbox-group","radio-group","select"].indexOf(o.popObj.type)>-1?(c(),C(x,{key:1,label:"数据：",class:"form-options-content"},{default:y((()=>[(c(!0),m(f,null,k(o.popObj.options,((e,a)=>(c(),m("div",{key:a,class:"form-options-box"},[h("ul",null,[h("li",null,[W,h("div",G,[v(s,{modelValue:e.label,"onUpdate:modelValue":a=>e.label=a},null,8,["modelValue","onUpdate:modelValue"])]),Q]),h("li",null,[X,h("div",Z,[v(s,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a},null,8,["modelValue","onUpdate:modelValue"])]),h("div",{class:"icon-right",onClick:e=>n.deleteOption(a)},[v(r,null,{default:y((()=>[v(u)])),_:1})],8,ee)])])])))),128)),h("div",ae,[v(S,{type:"primary",circle:"",onClick:n.addOption},{default:y((()=>[v(r,null,{default:y((()=>[v(D)])),_:1})])),_:1},8,["onClick"])])])),_:1})):_("",!0),Object.keys(o.popObj.propsData).length>0?(c(!0),m(f,{key:2},k(o.popObj.propsDataSelects,((e,a)=>(c(),m(f,null,[Object.keys(o.popObj.propsData).indexOf(`${e.key}`)>-1?(c(),C(x,{key:a,label:`${e.name}：`},{default:y((()=>[h("div",te,["function"!=e.type&&"data"!=e.type?(c(),C(s,{key:0,modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a},null,8,["modelValue","onUpdate:modelValue"])):"data"==e.type?(c(),C(N,{key:1,modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a,style:{width:"100%"}},{default:y((()=>[(c(!0),m(f,null,k(e.data,((e,a)=>(c(),C(I,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):(c(),C(s,{key:2,type:"textarea",autosize:{minRows:2,maxRows:4},modelValue:o.popObj.propsData[e.key],"onUpdate:modelValue":a=>o.popObj.propsData[e.key]=a,disabled:""},null,8,["modelValue","onUpdate:modelValue"])),"function"==e.type?(c(),m("div",{key:3,class:"fn-edit",onClick:a=>n.editFn(e,o.popObj.propsData[e.key])},[v(r,null,{default:y((()=>[v(j)])),_:1})],8,le)):_("",!0),h("div",{class:"icon-right",onClick:a=>n.deleteProps(e.key)},[v(r,null,{default:y((()=>[v(u)])),_:1})],8,oe)])])),_:2},1032,["label"])):_("",!0)],64)))),256)):_("",!0),v(x,null,{default:y((()=>[v(V,{placement:"right-start",trigger:"hover",width:"180px"},{reference:y((()=>[v(S,{type:"primary",circle:""},{default:y((()=>[v(r,null,{default:y((()=>[v(D)])),_:1})])),_:1})])),default:y((()=>[h("div",{class:"form-props-btn",onClick:a[7]||(a[7]=(...e)=>n.formSelectBtn&&n.formSelectBtn(...e))},[Object.keys(o.popObj.propsData).length==o.popObj.propsDataSelects.length?(c(),m("div",ne,"无属性")):(c(!0),m(f,{key:1},k(o.popObj.propsDataSelects,((e,a)=>(c(),m(f,null,[-1==Object.keys(o.popObj.propsData).indexOf(`${e.key}`)?(c(),C(S,{key:a,onClick:a=>n.propsClick(e)},{default:y((()=>[b(g(e.name),1)])),_:2},1032,["onClick"])):_("",!0)],64)))),256))])])),_:1})])),_:1}),v(x,null,{default:y((()=>[h("div",ie,[v(S,{type:"primary",onClick:a[8]||(a[8]=e=>n.submitForm("ruleFormARef"))},{default:y((()=>[b("保存")])),_:1}),v(S,{onClick:a[9]||(a[9]=e=>o.isShowFormAPop=!1)},{default:y((()=>[b("取消")])),_:1})])])),_:1})])),_:1},8,["model","rules"]))])),_:1},8,["modelValue","title"])])}]])},props:["__rawVueInfo__","enableRemoveButton","shortcutInitMode","JSCode","isShowAttribute"],data:function(){return{input:"",localAttributes:[],enable:!0,autoplay:!1,editMode:!1,textAttributes:""}},mounted(){document.querySelector(".attribute-container").addEventListener("click",(e=>{e.stopPropagation()})),"auto"===this.shortcutInitMode&&this.initShortcut()},beforeDestroy(){"auto"===this.shortcutInitMode&&this.destroyShortcut()},methods:{destroyShortcut(){s.unbind("⌘+a, ctrl+a"),s.unbind("⌘+s, ctrl+s"),s.unbind("⌘+d, ctrl+d"),s.unbind("⌘+c, ctrl+c")},initShortcut(){s("⌘+a, ctrl+a",(()=>{if(this.enable)return this.createNew(),!1})),s("⌘+s, ctrl+s",(()=>{if(this.enable)return this.save(),!1})),s("⌘+d, ctrl+d",(()=>{if(this.enable)return this.remove(),!1})),s("⌘+c, ctrl+c",(()=>{if(this.enable&&this.enableBroButton)return this.copyBro(),!1}))},onClassClick(){this.localAttributes.push({key:"class",value:"class-name"})},onEventClick(){this.localAttributes.push({key:"@click",value:"onEventClick"})},onTextClick(){this.localAttributes.push({key:"__text__",value:"content"})},createNew(){this.localAttributes.push({key:"",value:""})},childSave(e,a){let t=!1;this.localAttributes.forEach((l=>{l.key==e&&(l.value=a,t=!0)})),t||this.localAttributes.push({key:e,value:a}),this.save(!1)},save(e=!0){try{let a=[];if(this.editMode){a=this.textAttributes.split("\n").map((e=>{const[a,t]=e.split(": ");return{key:a,value:t}})),this.localAttributes=a}else a=this.localAttributes.filter((e=>!!e.key));this.$emit("save",{resultList:a,lc_id:this.rawInfoID}),e&&this.$notify({title:"提示",message:"代码已更新",position:"bottom-right",type:"success"})}catch(a){this.$message.error(a)}},remove(){this.$emit("remove",{lc_id:this.rawInfoID})},deleteItem(e){this.localAttributes.splice(e,1)},copyBro(){!function(e){let a=Object.create(e.__proto__);Object.assign(a,JSON.parse(JSON.stringify(e))),a.__proto__.parentCodeNode.__children.push(a)}(this.__rawVueInfo__),D.commit("onDragEnd")},onShow(){this.initShortcut()},onHide(){this.destroyShortcut()}},computed:{componentName(){return this.__rawVueInfo__?u(this.__rawVueInfo__):""},rawInfoID(){return this.__rawVueInfo__?r(this.__rawVueInfo__).lc_id:""},enableBroButton(){return[{name:"el-option",ifInDoc:!1},{name:"el-table-column",ifInDoc:!1},{name:"el-checkbox",ifInDoc:!0},{name:"el-radio",ifInDoc:!0}].find((e=>e.name==this.componentName))&&!1},attributeList(){const e=[],a=this.__rawVueInfo__;if(a){const t=a[u(a)];for(const a in t)if(t.hasOwnProperty(a)){const l=t[a];"object"!=typeof l&&"lc-mark"!=a&&"lc_id"!=a&&e.push({key:a,value:l})}}return e},attributeKeys(){return this.localAttributes.map((e=>e.key))}},watch:{attributeList:{handler:function(){this.localAttributes=this.attributeList},immediate:!0},localAttributes(e){0===e.length&&e.push({key:"",value:""}),this.textAttributes=e.map((e=>`${e.key}: ${e.value}`)).join("\n")}}},pe=e=>(x("data-v-44a1e425"),e=e(),A(),e),de={key:0,class:"attribute-empty"},ce={style:{"text-align":"center"}},me={style:{"margin-top":"20px"}},ve={name:"1"},ye=pe((()=>h("div",{class:"split"},":",-1))),be={class:"quick-add-root"},he={style:{"margin-top":"5px"}},fe={name:"2"},ke={style:{"margin-top":"10px","text-align":"center"}},ge=pe((()=>h("div",{style:{"text-algin":"center"}},[h("span",{class:"shortcut-tip"},"支持快捷键操作")],-1)));const _e=p(re,[["render",function(e,a,t,l,o,n){const i=d("el-empty"),s=d("styleComponent"),u=d("lFormA"),r=d("el-divider"),p=d("el-switch"),g=d("el-input"),O=d("Remove"),x=d("el-icon"),A=d("el-tag"),w=d("Plus"),D=d("el-button"),I=d("el-tooltip"),N=d("Refresh"),F=d("Delete"),B=d("document-copy"),M=d("el-scrollbar"),P=d("el-card");return c(),C(P,{class:"attribute-container"},{default:y((()=>[t.isShowAttribute?(c(),C(M,{key:1,height:"calc(100vh - 130px)"},{default:y((()=>[v(s,{localAttributes:e.localAttributes,"onUpdate:localAttributes":a[0]||(a[0]=a=>e.localAttributes=a),onChildSave:n.childSave},null,8,["localAttributes","onChildSave"]),"l-form"==n.componentName||"l-s-form"==n.componentName?(c(),C(u,{key:0,componentName:n.componentName,localAttributes:e.localAttributes,"onUpdate:localAttributes":a[1]||(a[1]=a=>e.localAttributes=a),onChildSave:n.childSave},null,8,["componentName","localAttributes","onChildSave"])):_("",!0),v(r,{"content-position":"left"},{default:y((()=>[b("特殊处理")])),_:1}),h("div",ce,[v(p,{modelValue:e.editMode,"onUpdate:modelValue":a[2]||(a[2]=a=>e.editMode=a),"active-text":"自由编辑","inactive-text":"约束编辑","active-color":"#13ce66","inactive-color":"#13ce66"},null,8,["modelValue"])]),h("div",me,[j(h("div",ve,[h("div",null,[(c(!0),m(f,null,k(e.localAttributes,((e,a)=>(c(),m("div",{class:"item",key:a},[v(g,{modelValue:e.key,"onUpdate:modelValue":a=>e.key=a,placeholder:"key"+a,class:"half-width",type:"textarea",autosize:{minRows:2,maxRows:4}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),ye,v(g,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,type:"textarea",placeholder:"value"+a,class:"half-width",style:{"flex-grow":"4"},autosize:{minRows:2,maxRows:4}},null,8,["modelValue","onUpdate:modelValue","placeholder"]),v(x,{style:{"margin-left":"5px"},onClick:e=>n.deleteItem(a)},{default:y((()=>[v(O)])),_:2},1032,["onClick"])])))),128)),h("div",be,[b(" 快速增加一些属性: "),h("div",he,[v(S,{name:"el-zoom-in-center"},{default:y((()=>[-1==n.attributeKeys.indexOf("class")?(c(),C(A,{key:0,size:"small",type:"success",onClick:n.onClassClick,effect:"dark",class:"tag"},{default:y((()=>[b("Class ")])),_:1},8,["onClick"])):_("",!0)])),_:1}),v(S,{name:"el-zoom-in-center"},{default:y((()=>[-1==n.attributeKeys.indexOf("@click")?(c(),C(A,{key:0,size:"small",type:"success",onClick:n.onEventClick,effect:"dark",class:"tag"},{default:y((()=>[b("点击事件")])),_:1},8,["onClick"])):_("",!0)])),_:1}),v(S,{name:"el-zoom-in-center"},{default:y((()=>[n.attributeKeys.includes("__text__")?_("",!0):(c(),C(A,{key:0,size:"small",type:"success",onClick:n.onTextClick,effect:"dark",class:"tag"},{default:y((()=>[b("文本内容")])),_:1},8,["onClick"]))])),_:1})])])])],512),[[V,!e.editMode]]),j(h("div",fe,[v(g,{type:"textarea",autosize:{minRows:4},placeholder:"请输入属性, 以key: value的形式(冒号后要有空格)",modelValue:e.textAttributes,"onUpdate:modelValue":a[3]||(a[3]=a=>e.textAttributes=a)},null,8,["modelValue"])],512),[[V,e.editMode]])]),h("div",ke,[v(I,{class:"item",effect:"dark",content:"新增属性 ctrl+a",placement:"bottom"},{default:y((()=>[v(D,{type:"primary",class:"center",onClick:n.createNew,circle:""},{default:y((()=>[v(x,null,{default:y((()=>[v(w)])),_:1})])),_:1},8,["onClick"])])),_:1}),v(I,{class:"item",effect:"dark",content:"保存属性 ctrl+s",placement:"bottom"},{default:y((()=>[v(D,{type:"success",class:"center",onClick:n.save,circle:""},{default:y((()=>[v(x,null,{default:y((()=>[v(N)])),_:1})])),_:1},8,["onClick"])])),_:1}),t.enableRemoveButton?(c(),C(I,{key:0,class:"item",effect:"dark",content:"移除该组件 ctrl+d",placement:"bottom"},{default:y((()=>[v(D,{type:"danger",class:"center",onClick:n.remove,circle:""},{default:y((()=>[v(x,null,{default:y((()=>[v(F)])),_:1})])),_:1},8,["onClick"])])),_:1})):_("",!0),n.enableBroButton?(c(),C(I,{key:1,class:"item",effect:"dark",content:"复制一个兄弟组件 ctrl+c",placement:"bottom"},{default:y((()=>[v(D,{type:"primary",class:"center",onClick:n.copyBro,circle:""},{default:y((()=>[v(x,null,{default:y((()=>[v(B)])),_:1})])),_:1},8,["onClick"])])),_:1})):_("",!0),ge])])),_:1})):(c(),m("div",de,[v(i,{description:"还没有数据哦"},{default:y((()=>[b(" 赶快拖拽组件来生成你的H5页面吧～ ")])),_:1})]))])),_:1})}],["__scopeId","data-v-44a1e425"]]);export{_e as default};
